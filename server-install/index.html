
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Get up and running with Llama 3.3, DeepSeek-R1, Phi-4, Gemma 3, and other large language models.">
      
      
        <meta name="author" content="QubitPi (https://github.com/Qubitpi)">
      
      
        <link rel="canonical" href="https://ollama.qubitpi.org/server-install/">
      
      
        <link rel="prev" href="./">
      
      
        <link rel="next" href="../client-install/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Home - Ollama Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/css/customizations.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#server-installation-configuration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Ollama Documentation" class="md-header__button md-logo" aria-label="Ollama Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Ollama Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Home
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/QubitPi/ollama" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    ollama
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  Server Setup

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../client-install/" class="md-tabs__link">
          
  
  
  Client Setup

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../security/" class="md-tabs__link">
          
  
  
  Operation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../compile/" class="md-tabs__link">
          
  
  
  Development

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Ollama Documentation" class="md-nav__button md-logo" aria-label="Ollama Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Ollama Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/QubitPi/ollama" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    ollama
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#use-installation-script" class="md-nav__link">
    <span class="md-ellipsis">
      Use installation script
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-mita-installation-package" class="md-nav__link">
    <span class="md-ellipsis">
      Download mita installation package
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-mita-package" class="md-nav__link">
    <span class="md-ellipsis">
      Install mita package
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grant-permissions-logout-and-login-again-to-make-the-change-effective" class="md-nav__link">
    <span class="md-ellipsis">
      Grant permissions, logout and login again to make the change effective
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reconnect-the-server-via-ssh-check-mita-daemon-status" class="md-nav__link">
    <span class="md-ellipsis">
      Reconnect the server via SSH, check mita daemon status
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#check-mita-working-status" class="md-nav__link">
    <span class="md-ellipsis">
      Check mita working status
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modify-proxy-server-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Modify proxy server settings
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-proxy-service" class="md-nav__link">
    <span class="md-ellipsis">
      Start proxy service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Settings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bbr-congestion-control-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      BBR Congestion Control Algorithm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-outbound-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring Outbound Proxy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns-policy-in-ipv4-ipv6-dual-stack-network" class="md-nav__link">
    <span class="md-ellipsis">
      DNS Policy in IPv4 / IPv6 Dual-Stack Network
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limiting-user-traffic" class="md-nav__link">
    <span class="md-ellipsis">
      Limiting User Traffic
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-install-ntp-network-time-synchronization-service" class="md-nav__link">
    <span class="md-ellipsis">
      [Optional] Install NTP network time synchronization service
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Server Setup
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Server Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#use-installation-script" class="md-nav__link">
    <span class="md-ellipsis">
      Use installation script
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-mita-installation-package" class="md-nav__link">
    <span class="md-ellipsis">
      Download mita installation package
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-mita-package" class="md-nav__link">
    <span class="md-ellipsis">
      Install mita package
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grant-permissions-logout-and-login-again-to-make-the-change-effective" class="md-nav__link">
    <span class="md-ellipsis">
      Grant permissions, logout and login again to make the change effective
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reconnect-the-server-via-ssh-check-mita-daemon-status" class="md-nav__link">
    <span class="md-ellipsis">
      Reconnect the server via SSH, check mita daemon status
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#check-mita-working-status" class="md-nav__link">
    <span class="md-ellipsis">
      Check mita working status
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modify-proxy-server-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Modify proxy server settings
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-proxy-service" class="md-nav__link">
    <span class="md-ellipsis">
      Start proxy service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Settings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bbr-congestion-control-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      BBR Congestion Control Algorithm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-outbound-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring Outbound Proxy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns-policy-in-ipv4-ipv6-dual-stack-network" class="md-nav__link">
    <span class="md-ellipsis">
      DNS Policy in IPv4 / IPv6 Dual-Stack Network
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limiting-user-traffic" class="md-nav__link">
    <span class="md-ellipsis">
      Limiting User Traffic
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-install-ntp-network-time-synchronization-service" class="md-nav__link">
    <span class="md-ellipsis">
      [Optional] Install NTP network time synchronization service
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Client Setup
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Client Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../client-install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation & Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../client-install-openwrt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenWrt
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Operation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Operation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Maintenance & Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compilation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../protocol/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Proxy Protocol
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#use-installation-script" class="md-nav__link">
    <span class="md-ellipsis">
      Use installation script
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-mita-installation-package" class="md-nav__link">
    <span class="md-ellipsis">
      Download mita installation package
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-mita-package" class="md-nav__link">
    <span class="md-ellipsis">
      Install mita package
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grant-permissions-logout-and-login-again-to-make-the-change-effective" class="md-nav__link">
    <span class="md-ellipsis">
      Grant permissions, logout and login again to make the change effective
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reconnect-the-server-via-ssh-check-mita-daemon-status" class="md-nav__link">
    <span class="md-ellipsis">
      Reconnect the server via SSH, check mita daemon status
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#check-mita-working-status" class="md-nav__link">
    <span class="md-ellipsis">
      Check mita working status
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modify-proxy-server-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Modify proxy server settings
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-proxy-service" class="md-nav__link">
    <span class="md-ellipsis">
      Start proxy service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Settings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bbr-congestion-control-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      BBR Congestion Control Algorithm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-outbound-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring Outbound Proxy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns-policy-in-ipv4-ipv6-dual-stack-network" class="md-nav__link">
    <span class="md-ellipsis">
      DNS Policy in IPv4 / IPv6 Dual-Stack Network
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limiting-user-traffic" class="md-nav__link">
    <span class="md-ellipsis">
      Limiting User Traffic
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-install-ntp-network-time-synchronization-service" class="md-nav__link">
    <span class="md-ellipsis">
      [Optional] Install NTP network time synchronization service
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/QubitPi/ollama/edit/master/docs/server-install.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/QubitPi/ollama/raw/master/docs/server-install.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="server-installation-configuration"><a class="toclink" href="#server-installation-configuration">Server Installation &amp; Configuration</a></h1>
<p>The proxy server software mita needs to run on Linux. We provide both debian and RPM installers for installing mita on Debian / Ubuntu and Fedora / CentOS / Red Hat Enterprise Linux series distributions.</p>
<h2 id="use-installation-script"><a class="toclink" href="#use-installation-script">Use installation script</a></h2>
<p>Follow the installation script and complete the server installation and configuration.</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-fSsLO<span class="w"> </span>https://raw.githubusercontent.com/enfein/mieru/refs/heads/main/tools/setup.py
chmod<span class="w"> </span>+x<span class="w"> </span>setup.py
sudo<span class="w"> </span>python3<span class="w"> </span>setup.py
</code></pre></div>
<p>Or you can manually install and configure proxy server using the steps below.</p>
<h2 id="download-mita-installation-package"><a class="toclink" href="#download-mita-installation-package">Download mita installation package</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># Debian / Ubuntu - X86_64</span>
curl<span class="w"> </span>-LSO<span class="w"> </span>https://github.com/enfein/mieru/releases/download/v3.15.0/mita_3.15.0_amd64.deb

<span class="c1"># Debian / Ubuntu - ARM 64</span>
curl<span class="w"> </span>-LSO<span class="w"> </span>https://github.com/enfein/mieru/releases/download/v3.15.0/mita_3.15.0_arm64.deb

<span class="c1"># RedHat / CentOS / Rocky Linux - X86_64</span>
curl<span class="w"> </span>-LSO<span class="w"> </span>https://github.com/enfein/mieru/releases/download/v3.15.0/mita-3.15.0-1.x86_64.rpm

<span class="c1"># RedHat / CentOS / Rocky Linux - ARM 64</span>
curl<span class="w"> </span>-LSO<span class="w"> </span>https://github.com/enfein/mieru/releases/download/v3.15.0/mita-3.15.0-1.aarch64.rpm
</code></pre></div>
<h2 id="install-mita-package"><a class="toclink" href="#install-mita-package">Install mita package</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># Debian / Ubuntu - X86_64</span>
sudo<span class="w"> </span>dpkg<span class="w"> </span>-i<span class="w"> </span>mita_3.15.0_amd64.deb

<span class="c1"># Debian / Ubuntu - ARM 64</span>
sudo<span class="w"> </span>dpkg<span class="w"> </span>-i<span class="w"> </span>mita_3.15.0_arm64.deb

<span class="c1"># RedHat / CentOS / Rocky Linux - X86_64</span>
sudo<span class="w"> </span>rpm<span class="w"> </span>-Uvh<span class="w"> </span>--force<span class="w"> </span>mita-3.15.0-1.x86_64.rpm

<span class="c1"># RedHat / CentOS / Rocky Linux - ARM 64</span>
sudo<span class="w"> </span>rpm<span class="w"> </span>-Uvh<span class="w"> </span>--force<span class="w"> </span>mita-3.15.0-1.aarch64.rpm
</code></pre></div>
<p>Those instructions can also be used to upgrade the version of mita software package.</p>
<h2 id="grant-permissions-logout-and-login-again-to-make-the-change-effective"><a class="toclink" href="#grant-permissions-logout-and-login-again-to-make-the-change-effective">Grant permissions, logout and login again to make the change effective</a></h2>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>usermod<span class="w"> </span>-a<span class="w"> </span>-G<span class="w"> </span>mita<span class="w"> </span><span class="nv">$USER</span>

<span class="c1"># logout</span>
<span class="nb">exit</span>
</code></pre></div>
<h2 id="reconnect-the-server-via-ssh-check-mita-daemon-status"><a class="toclink" href="#reconnect-the-server-via-ssh-check-mita-daemon-status">Reconnect the server via SSH, check mita daemon status</a></h2>
<div class="highlight"><pre><span></span><code>systemctl<span class="w"> </span>status<span class="w"> </span>mita
</code></pre></div>
<p>If the output contains <code>active (running)</code>, it means that the mita daemon is already running. Normally, mita will start automatically after the server is booted.</p>
<h2 id="check-mita-working-status"><a class="toclink" href="#check-mita-working-status">Check mita working status</a></h2>
<div class="highlight"><pre><span></span><code>mita<span class="w"> </span>status
</code></pre></div>
<p>If the installation is just completed, the output will be <code>mita server status is "IDLE"</code>, indicating that mita has not yet listening to requests from the mieru client.</p>
<h2 id="modify-proxy-server-settings"><a class="toclink" href="#modify-proxy-server-settings">Modify proxy server settings</a></h2>
<p>The mieru proxy supports two different transport protocols, TCP and UDP. To understand the differences between the protocols, please read <a href="../protocol/">mieru proxy protocols</a>.</p>
<p>Users should call</p>
<div class="highlight"><pre><span></span><code>mita<span class="w"> </span>apply<span class="w"> </span>config<span class="w"> </span>&lt;FILE&gt;
</code></pre></div>
<p>to modify the proxy server settings. <code>&lt;FILE&gt;</code> is a JSON formatted configuration file. This configuration file does not need to specify the full proxy server settings. When you run command <code>mita apply config &lt;FILE&gt;</code>, the contents of the file will be merged into any existing proxy server settings.</p>
<p>Below is an example of the server configuration file.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;portBindings&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;portRange&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;2012-2022&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;protocol&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;TCP&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;port&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">2027</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;protocol&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;TCP&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="s2">&quot;users&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ducaiguozei&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;password&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;xijinping&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;meiyougongchandang&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;password&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;caiyouxinzhongguo&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="s2">&quot;loggingLevel&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;mtu&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">1400</span>
<span class="p">}</span>
</code></pre></div>
<ol>
<li>The <code>portBindings</code> -&gt; <code>port</code> property is the TCP or UDP port number that mita listens on, specify a value from 1025 to 65535. If you want to listen to a range of consecutive port numbers, you can also use the <code>portRange</code> property instead. <strong>Please make sure that the firewall allows communication using these ports.</strong></li>
<li>The <code>portBindings</code> -&gt; <code>protocol</code> property can be set to <code>TCP</code> or <code>UDP</code>.</li>
<li>Fill in the <code>users</code> -&gt; <code>name</code> property with the user name.</li>
<li>Fill in the <code>users</code> -&gt; <code>password</code> property with the user's password.</li>
<li>[Optional] The <code>mtu</code> property is the maximum transport layer payload size when using the UDP proxy protocol. The default value is 1400. The minimum value is 1280.</li>
</ol>
<p>In addition to this, mita can listen to several different ports. We recommend using multiple ports in both server and client configurations.</p>
<p>You can also create multiple users if you want to share the proxy for others to use.</p>
<p>Assuming that on the server, the configuration file name is <code>server_config.json</code>, call the command <code>mita apply config server_config.json</code> to write the configuration after the file is modified.</p>
<p>If there is an error in the configuration, mita will print the problem that occurred. Follow the prompts to modify the configuration file and re-run the <code>mita apply config &lt;FILE&gt;</code> command to write the configuration.</p>
<p>After that, invoke command</p>
<div class="highlight"><pre><span></span><code>mita<span class="w"> </span>describe<span class="w"> </span>config
</code></pre></div>
<p>to check the current proxy settings.</p>
<h2 id="start-proxy-service"><a class="toclink" href="#start-proxy-service">Start proxy service</a></h2>
<p>Use command</p>
<div class="highlight"><pre><span></span><code>mita<span class="w"> </span>start
</code></pre></div>
<p>to start proxy service. At this point, mita will start listening to the port number specified in the settings.</p>
<p>Then, use command</p>
<div class="highlight"><pre><span></span><code>mita<span class="w"> </span>status
</code></pre></div>
<p>to check working status. If <code>mita server status is "RUNNING"</code> is returned here, it means that the proxy service is running and can process client requests.</p>
<p>If you want to stop the proxy service, use command</p>
<div class="highlight"><pre><span></span><code>mita<span class="w"> </span>stop
</code></pre></div>
<p>Note that each time you change the settings with <code>mita apply config &lt;FILE&gt;</code>, you need to restart the service with <code>mita stop</code> and <code>mita start</code> for the new settings to take effect. An exception is, if you only change <code>users</code> or <code>loggingLevel</code> settings, you may run <code>mita reload</code> to load the new settings, which will not disturb active connections between server and client.</p>
<p>After starting the proxy service, proceed to <a href="../client-install/">Client Installation &amp; Configuration</a>.</p>
<h2 id="advanced-settings"><a class="toclink" href="#advanced-settings">Advanced Settings</a></h2>
<h3 id="bbr-congestion-control-algorithm"><a class="toclink" href="#bbr-congestion-control-algorithm">BBR Congestion Control Algorithm</a></h3>
<p><a href="https://en.wikipedia.org/wiki/TCP_congestion_control#TCP_BBR">BBR</a> is a congestion control algorithm that does not rely on packet loss. Under poor network conditions, network transmission using BBR is faster than traditional algorithms.</p>
<p>mieru's UDP transmission protocol already uses the BBR algorithm.</p>
<p>Under the project root directory, we provide a script <code>tools/enable_tcp_bbr.py</code>, which allows users to enable BBR algorithm on TCP transmission protocol on Linux.</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>./tools/enable_tcp_bbr.py
</code></pre></div>
<p>That script can be used on both server side and client side.</p>
<h3 id="configuring-outbound-proxy"><a class="toclink" href="#configuring-outbound-proxy">Configuring Outbound Proxy</a></h3>
<p>The outbound proxy feature allows mieru to work with other proxy tools to form a proxy chain. An example of the network topology of a proxy chain is shown in the diagram below:</p>
<div class="highlight"><pre><span></span><code>mieru client -&gt; GFW -&gt; mita server -&gt; cloudflare proxy client -&gt; cloudflare CDN -&gt; target website
</code></pre></div>
<p>Through proxy chain, the target website sees the IP address of the cloudflare CDN, not the address of the mita server.</p>
<p>Below is an example to configure a proxy chain.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;egress&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;proxies&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;cloudflare&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;protocol&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;SOCKS5_PROXY_PROTOCOL&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;host&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;port&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">4000</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;socks5Authentication&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s2">&quot;user&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;shilishanlu&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;password&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;buhuanjian&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="s2">&quot;rules&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;ipRanges&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
<span class="w">                </span><span class="s2">&quot;domainNames&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
<span class="w">                </span><span class="s2">&quot;action&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;PROXY&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;proxyName&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;cloudflare&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<ol>
<li>In the <code>egress</code> -&gt; <code>proxies</code> property, list the information of outbound proxy servers. The current version only supports socks5 outbound, so the value of <code>protocol</code> must be set to <code>SOCKS5_PROXY_PROTOCOL</code>. If the outbound proxy server requires socks5 username and password authentication, please fill in the <code>socks5Authentication</code> property. Otherwise, please remove the <code>socks5Authentication</code> property.</li>
<li>In the <code>egress</code> -&gt; <code>rules</code> property, list outbound rules. The current version allows users to add up to one rule, and the values of <code>ipRanges</code>, <code>domainNames</code>, and <code>action</code> must be the same as the example above. <code>proxyName</code> needs to point to a proxy that exists in <code>egress</code> -&gt; <code>proxies</code> property.</li>
</ol>
<p>If you want to turn off the outbound proxy feature, simply set the <code>egress</code> property to an empty value <code>{}</code>.</p>
<p>Note that proxy chain is different from nested proxy. An example of the network topology of a nested proxy is shown in the diagram below:</p>
<div class="highlight"><pre><span></span><code>Tor browser -&gt; mieru client -&gt; GFW -&gt; mita server -&gt; Tor network -&gt; target website
</code></pre></div>
<p>For information on how to configure nested proxy on a Tor browser, please refer to the <a href="../security/">Security Guide</a>.</p>
<h3 id="dns-policy-in-ipv4-ipv6-dual-stack-network"><a class="toclink" href="#dns-policy-in-ipv4-ipv6-dual-stack-network">DNS Policy in IPv4 / IPv6 Dual-Stack Network</a></h3>
<p>When a proxy client requests a target website using a domain name instead of an IP address, the proxy server needs to initiate a DNS request. If the proxy server is in an IPv4 / IPv6 dual-stack network, you can adjust the DNS policy using the following configuration:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;dns&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;dualStack&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;USE_FIRST_IP&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The <code>dns</code> -&gt; <code>dualStack</code> attribute supports the following values:</p>
<ol>
<li><code>USE_FIRST_IP</code>: Always use the first IP address returned by the DNS server. This is the default policy.</li>
<li><code>PREFER_IPv4</code>: Prefer to use the first IPv4 address returned by the DNS server. If there is no IPv4 address, use the first IPv6 address.</li>
<li><code>PREFER_IPv6</code>: Prefer to use the first IPv6 address returned by the DNS server. If there is no IPv6 address, use the first IPv4 address.</li>
<li><code>ONLY_IPv4</code>: Force to use the first IPv4 address returned by the DNS server. If there is no IPv4 address, the connection fails.</li>
<li><code>ONLY_IPv6</code>: Force to use the first IPv6 address returned by the DNS server. If there is no IPv6 address, the connection fails.</li>
</ol>
<h3 id="limiting-user-traffic"><a class="toclink" href="#limiting-user-traffic">Limiting User Traffic</a></h3>
<p>We can use the <code>users</code> -&gt; <code>quotas</code> property to limit the amount of traffic a user is allowed to use. For example, if you want user "ducaiguozei" to use no more than 1 GB of traffic within 1 day, and no more than 10 GB within 30 days, you can apply the following settings.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;portBindings&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;portRange&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;2012-2022&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;protocol&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;TCP&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;port&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">2027</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;protocol&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;TCP&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="s2">&quot;users&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ducaiguozei&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;password&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;xijinping&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;quotas&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="s2">&quot;days&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;megabytes&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">1024</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="s2">&quot;days&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">30</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;megabytes&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">10240</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;meiyougongchandang&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;password&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;caiyouxinzhongguo&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="s2">&quot;loggingLevel&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;mtu&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">1400</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="optional-install-ntp-network-time-synchronization-service"><a class="toclink" href="#optional-install-ntp-network-time-synchronization-service">[Optional] Install NTP network time synchronization service</a></h2>
<p>The client and proxy server software calculate the key based on the user name, password and system time. The server can decrypt and respond to the client's request only if the client and server have the same key. This requires that the system time of the client and the server must be in sync.</p>
<p>To ensure that the server system time is accurate, we recommend that users install the NTP network time service. In many Linux distributions, installing NTP is only one command.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Debian / Ubuntu</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>ntp

<span class="c1"># RedHat / CentOS / Rocky Linux</span>
sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>ntp
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <p>&copy <a href="https://github.com/ollama"><em>Ollama Organization</em></a><br/><span>This project is licensed under the MIT license.</span></p>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.top", "navigation.expand", "navigation.instant", "content.action.edit", "content.action.view", "content.code.annotate"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>