{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\u898b\u3048\u308b / mieru","text":"<p>\u4e2d\u6587\u6587\u6863</p> <p>mieru is a secure, hard to classify, hard to probe, TCP or UDP protocol-based socks5 / HTTP / HTTPS network proxy software.</p> <p>The mieru proxy software suite consists of two parts, a client software called mieru, and a proxy server software called mita.</p>"},{"location":"#features","title":"Features","text":"<ol> <li>Provides socks5, HTTP, and HTTPS proxy interfaces.</li> <li>Does not use TLS protocol. No need to register a domain name or set up a fake website.</li> <li>Uses the high-strength XChaCha20-Poly1305 encryption algorithm that generates encryption keys based on username, password and system time.</li> <li>Utilizes random padding and replay attack detection to prevent GFW from detecting the mieru service.</li> <li>Supports multiple users sharing a single proxy server.</li> <li>Supports both IPv4 and IPv6.</li> <li>State-of-the-art provisioning using HashiCorp</li> </ol>"},{"location":"#third-party-clients","title":"Third Party Clients","text":"<ul> <li>Desktop (Windows, MacOS, Linux)</li> <li>Clash Verge Rev</li> <li>Mihomo Party</li> <li>Android</li> <li>ClashMetaForAndroid</li> <li>ClashMi</li> <li>Exclave with mieru plugin</li> <li>husi with mieru plugin</li> <li>NekoBoxForAndroid with mieru plugin</li> <li>iOS</li> <li>ClashMi</li> </ul>"},{"location":"#user-guide","title":"User Guide","text":"<ol> <li>Server Installation &amp; Configuration</li> <li>Client Installation &amp; Configuration</li> <li>Client Installation &amp; Configuration - OpenWrt</li> <li>Maintenance &amp; Troubleshooting</li> <li>Security Guide</li> <li>Compilation</li> </ol>"},{"location":"#protocol","title":"Protocol","text":"<p>The principle of mieru is similar to shadowsocks / v2ray etc. It creates an encrypted channel between the client and the proxy server outside the firewall. GFW cannot decrypt the encrypted transmission and cannot determine the destination you end up visiting, so it has no choice but to let you go.</p> <p>For an explanation of the mieru protocol, see mieru Proxy Protocol.</p>"},{"location":"#share","title":"Share","text":"<p>If you think this software is helpful, please share to your friends. Thanks!</p>"},{"location":"#contact-us","title":"Contact Us","text":"<p>Use GitHub issue.</p>"},{"location":"#license","title":"License","text":"<p>Use of this software is subject to the GPL-3 license.</p>"},{"location":"announcement.zh_CN/","title":"\u6b22\u8fce\u8bd5\u7528\u6211\u5f00\u53d1\u7684\u7ffb\u5899\u5de5\u5177\u3010\u898b\u3048\u308b\u3011","text":"<p>(https://pincong.rocks/article/36417)</p> <p>\u9879\u76ee\u5730\u5740\uff1ahttps://github.com/enfein/mieru</p> <p>\u5927\u5bb6\u597d\uff0c\u6211\u662f enfein\u3002</p> <p>mieru\u3010\u898b\u3048\u308b\u3011\u662f\u6211\u82b1\u8d39\u8fd1\u4e00\u5e74\u65f6\u95f4\u5f00\u53d1\u7684\u65b0\u578b\u7ffb\u5899\u5de5\u5177\u3002</p> <p>\u5728\u5f00\u53d1 mieru \u4e4b\u524d\uff0c\u6211\u4f7f\u7528\u8fc7 v2ray \u548c trojan\u3002\u8fd9\u4e24\u6b3e\u8f6f\u4ef6\u53ef\u4ee5\u505a\u5230\u7a33\u5b9a\u7ffb\u5899\uff0c\u6211\u4e5f\u5f88\u6b23\u8d4f TLS + websocket \u8fd9\u79cd\u628a\u4ee3\u7406\u670d\u52a1\u5668\u4f2a\u88c5\u6210\u6b63\u5e38\u7f51\u7ad9\u6b3a\u9a97 GFW \u7684\u505a\u6cd5\u3002\u7136\u800c\u4f7f\u7528 TLS + websocket \u9700\u8981\u7533\u8bf7\u57df\u540d\uff0c\u914d\u7f6e\u8d77\u6765\u8f83\u4e3a\u9ebb\u70e6\u3002v2ray \u4e5f\u652f\u6301\u4e00\u4e9b\u53ea\u9700\u8981\u7528\u6237\u540d\u548c\u5bc6\u7801\u5c31\u53ef\u4ee5\u914d\u7f6e\u7684\u7ffb\u5899\u534f\u8bae\uff08\u5982 vmess \u548c mKCP\uff09\uff0c\u4f46\u7531\u4e8e\u534f\u8bae\u672c\u8eab\u7684\u6f0f\u6d1e\uff0c\u5176\u6d41\u91cf\u7279\u5f81\u53ef\u4ee5\u88ab GFW \u8bc6\u522b\u3002\u6211\u5728 KCP \u534f\u8bae\u7684\u57fa\u7840\u4e0a\u505a\u4e86\u4e00\u4e9b\u65b0\u7684\u5c1d\u8bd5\uff0c\u6781\u5927\u51cf\u5c11\u4e86\u6d41\u91cf\u7279\u5f81\uff0c\u4e8e\u662f\u5c31\u6709\u4e86 mieru\u3002\u6211\u7684\u76ee\u6807\u662f\uff0c\u8ba9 mieru \u6210\u4e3a\u4e00\u6b3e\u914d\u7f6e\u7b80\u5355\u3001\u6613\u4e8e\u4e0a\u624b\u3001\u5b89\u5168\u53ef\u9760\u3001\u80fd\u591f\u957f\u671f\u7a33\u5b9a\u7ffb\u5899\u7684\u5de5\u5177\u3002</p> <p>\u5173\u4e8e mieru \u7684\u7279\u6027\uff0c\u4ee5\u53ca\u5b89\u88c5\u548c\u914d\u7f6e\u65b9\u9762\u7684\u4fe1\u606f\uff0c\u8bf7\u79fb\u6b65\u81f3 GitHub \u67e5\u770b\u3002\u5e0c\u671b\u54c1\u8471\u7f51\u53cb\u4eec\u53ef\u4ee5</p> <ol> <li>\u4e3a\u9879\u76ee\u52a0\u661f\u53f7</li> <li>\u79ef\u6781\u8bd5\u7528\u8fd9\u6b3e\u5de5\u5177\uff0c\u5bfb\u627e bug\uff0c\u63d0\u51fa\u65b0\u9700\u6c42</li> <li>\u5982\u679c\u89c9\u5f97\u597d\u7528\uff0c\u5411\u4ed6\u4eba\u63a8\u5e7f</li> <li>\u5728\u8fd9\u91cc\u6216 GitHub \u4e0e\u6211\u8ba8\u8bba\u6280\u672f</li> </ol> <p>\u672c\u4eba\u6700\u65e9\u56e0\u5de5\u4f5c\u9700\u8981\u5b66\u4f1a\u4e86\u7ffb\u5899\uff0c\u4e86\u89e3\u5230\u81ea\u7531\u4e16\u754c\u7684\u771f\u5b9e\u4fe1\u606f\u540e\uff0c\u53d1\u73b0\u5899\u5185\u7684\u7edd\u5927\u591a\u6570\u6c11\u4f17\u751f\u6d3b\u5728\u65e0\u5c3d\u7684\u8c0e\u8a00\u4e4b\u4e2d\u3002\u6211\u5e0c\u671b\u80fd\u591f\u7528\u81ea\u5df1\u7684\u4e13\u957f\uff0c\u5524\u9192\u66f4\u591a\u4e0d\u660e\u771f\u76f8\u7684\u7fa4\u4f17\u3002\u671b\u5404\u4f4d\u54c1\u8471\u7f51\u53cb\u591a\u591a\u652f\u6301\uff0c\u4e3a\u5b9e\u73b0\u8fd9\u4e00\u76ee\u6807\u6dfb\u7816\u52a0\u74e6\u3002\u611f\u6fc0\u6d95\u96f6\uff0c\u65e0\u4ee5\u4e3a\u62a5\u3002</p> <p>2021-10-21</p>"},{"location":"client-install-openwrt/","title":"Client Installation &amp; Configuration - OpenWrt","text":"<p>OpenWrt is a minimal Linux distribution, and additional steps are required to run the mieru client in an OpenWrt environment. Please refer to the Client Installation &amp; Configuration guide, and follow the instructions here to install and configure the mieru client.</p>"},{"location":"client-install-openwrt/#download-mieru-client","title":"Download mieru client","text":"<p>After downloading the mieru client software, please copy the extracted mieru executable file to the <code>/usr/bin/</code> directory on the OpenWrt system.</p>"},{"location":"client-install-openwrt/#modify-proxy-client-settings","title":"Modify proxy client settings","text":"<p>To allow other devices to connect to the proxy client on OpenWrt, you must set <code>socks5ListenLAN</code> to <code>true</code>. If you enable HTTP/HTTPS proxy, <code>httpProxyListenLAN</code> must also be set to <code>true</code>.</p> <p>In OpenWrt, do not use the <code>mieru apply config &lt;FILE&gt;</code> and <code>mieru describe config</code> commands. Please save the client configuration directly to the <code>/etc/mieru_client_config.json</code> file.</p> <p>Additionally, it is recommended to set the log level <code>loggingLevel</code> to <code>ERROR</code> to prevent logs from filling up the disk.</p>"},{"location":"client-install-openwrt/#start-proxy-client","title":"Start proxy client","text":"<p>To start and stop the client, please do not use the <code>mieru start</code> and <code>mieru stop</code> commands. Please copy the <code>configs/examples/etc_initd_mieru</code> file from the project root directory to the <code>/etc/init.d/mieru</code> file, and grant it executable permission. Afterwards, the mieru client will automatically start when OpenWrt boots up.</p> <p>If you need to manually start or stop the mieru client, you can use the commands <code>/etc/init.d/mieru start</code> and <code>/etc/init.d/mieru stop</code>.</p>"},{"location":"client-install-openwrt.zh_CN/","title":"\u5ba2\u6237\u7aef\u5b89\u88c5\u4e0e\u914d\u7f6e - OpenWrt","text":"<p>OpenWrt \u662f\u4e00\u4e2a\u6781\u7b80 Linux \u73af\u5883\uff0c\u5728 OpenWrt \u73af\u5883\u8fd0\u884c mieru \u5ba2\u6237\u7aef\u8f6f\u4ef6\u9700\u8981\u989d\u5916\u7684\u6b65\u9aa4\u3002\u8bf7\u53c2\u7167\u5ba2\u6237\u7aef\u5b89\u88c5\u4e0e\u914d\u7f6e\uff0c\u540c\u65f6\u6309\u7167\u8fd9\u91cc\u7684\u63d0\u793a\u5b89\u88c5\u548c\u914d\u7f6e mieru \u5ba2\u6237\u7aef\u3002</p>"},{"location":"client-install-openwrt.zh_CN/#mieru","title":"\u4e0b\u8f7d mieru \u5ba2\u6237\u7aef","text":"<p>\u5728\u4e0b\u8f7d mieru \u5ba2\u6237\u7aef\u8f6f\u4ef6\u540e\uff0c\u8bf7\u5c06\u89e3\u538b\u7f29\u540e\u7684 mieru \u53ef\u6267\u884c\u6587\u4ef6\u590d\u5236\u5230 OpenWrt \u7cfb\u7edf\u7684 <code>/usr/bin/</code> \u76ee\u5f55\u4e0b\u3002</p>"},{"location":"client-install-openwrt.zh_CN/#_1","title":"\u4fee\u6539\u5ba2\u6237\u7aef\u7684\u8bbe\u7f6e","text":"<p>\u4e3a\u4e86\u80fd\u8ba9\u5176\u4ed6\u8bbe\u5907\u8fde\u63a5\u81f3 OpenWrt \u4e0a\u7684\u4ee3\u7406\u5ba2\u6237\u7aef\uff0c\u5fc5\u987b\u5c06 <code>socks5ListenLAN</code> \u8bbe\u7f6e\u6210 <code>true</code>\u3002\u5982\u679c\u542f\u52a8 HTTP / HTTPS \u4ee3\u7406\uff0c<code>httpProxyListenLAN</code> \u4e5f\u5fc5\u987b\u8bbe\u7f6e\u6210 <code>true</code>\u3002</p> <p>\u5728 OpenWrt \u4e2d\uff0c\u8bf7\u52ff\u4f7f\u7528 <code>mieru apply config &lt;FILE&gt;</code> \u548c <code>mieru describe config</code> \u6307\u4ee4\u3002\u8bf7\u5c06\u5ba2\u6237\u7aef\u914d\u7f6e\u76f4\u63a5\u4fdd\u5b58\u81f3 <code>/etc/mieru_client_config.json</code> \u6587\u4ef6\u3002</p> <p>\u53e6\u5916\uff0c\u5efa\u8bae\u5c06\u65e5\u5fd7\u7b49\u7ea7 <code>loggingLevel</code> \u8bbe\u7f6e\u6210 <code>ERROR</code> \u9632\u6b62\u65e5\u5fd7\u6253\u6ee1\u786c\u76d8\u3002</p>"},{"location":"client-install-openwrt.zh_CN/#_2","title":"\u542f\u52a8\u5ba2\u6237\u7aef","text":"<p>\u9700\u8981\u542f\u52a8\u548c\u505c\u6b62\u5ba2\u6237\u7aef\u65f6\uff0c\u8bf7\u52ff\u4f7f\u7528 <code>mieru start</code> \u548c <code>mieru stop</code> \u6307\u4ee4\u3002\u8bf7\u5c06\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u7684 <code>configs/examples/etc_initd_mieru</code> \u6587\u4ef6\u590d\u5236\u5e76\u4fdd\u5b58\u81f3 <code>/etc/init.d/mieru</code> \u6587\u4ef6\uff0c\u5e76\u8d4b\u4e88\u53ef\u6267\u884c\u6743\u9650\u3002\u6b64\u540e\uff0cmieru \u5ba2\u6237\u7aef\u5c06\u5728 OpenWrt \u5f00\u673a\u540e\u81ea\u884c\u542f\u52a8\u3002</p> <p>\u5982\u679c\u9700\u8981\u624b\u52a8\u542f\u52a8\u6216\u505c\u6b62 mieru \u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u4f7f\u7528\u6307\u4ee4 <code>/etc/init.d/mieru start</code> \u548c <code>/etc/init.d/mieru stop</code>\u3002</p>"},{"location":"client-install/","title":"Client Installation &amp; Configuration","text":""},{"location":"client-install/#download-mieru-client","title":"Download mieru client","text":"<p>The mieru client supports Windows, Mac OS, and Linux. Users can download it from the GitHub Releases page. After unzip, place the mieru executable under the system path <code>PATH</code>.</p> <p>If your client OS is Linux, you can also install mieru using the debian and RPM installers.</p>"},{"location":"client-install/#modify-proxy-client-settings","title":"Modify proxy client settings","text":"<p>Use can invoke command</p> <pre><code>mieru apply config &lt;FILE&gt;\n</code></pre> <p>to modify the proxy client settings. <code>&lt;FILE&gt;</code> is a JSON formatted configuration file. This configuration file does not need to specify the full proxy client settings. When you run command <code>mieru apply config &lt;FILE&gt;</code>, the contents of the file will be merged into any existing proxy client settings.</p> <p>An example of client configuration is as follows.</p> <pre><code>{\n    \"profiles\": [\n        {\n            \"profileName\": \"default\",\n            \"user\": {\n                \"name\": \"ducaiguozei\",\n                \"password\": \"xijinping\"\n            },\n            \"servers\": [\n                {\n                    \"ipAddress\": \"12.34.56.78\",\n                    \"domainName\": \"\",\n                    \"portBindings\": [\n                        {\n                            \"portRange\": \"2012-2022\",\n                            \"protocol\": \"TCP\"\n                        },\n                        {\n                            \"port\": 2027,\n                            \"protocol\": \"TCP\"\n                        }\n                    ]\n                }\n            ],\n            \"mtu\": 1400,\n            \"multiplexing\": {\n                \"level\": \"MULTIPLEXING_HIGH\"\n            }\n        }\n    ],\n    \"activeProfile\": \"default\",\n    \"rpcPort\": 8964,\n    \"socks5Port\": 1080,\n    \"loggingLevel\": \"INFO\",\n    \"socks5ListenLAN\": false,\n    \"httpProxyPort\": 8080,\n    \"httpProxyListenLAN\": false\n}\n</code></pre> <p>Please use a text editor to modify the following fields.</p> <ol> <li>In the <code>profiles</code> -&gt; <code>user</code> -&gt; <code>name</code> property, fill in the username. This must be the same as the setting in the proxy server.</li> <li>In the <code>profiles</code> -&gt; <code>user</code> -&gt; <code>password</code> property, fill in the password. This must be the same as the setting in the proxy server.</li> <li>In the <code>profiles</code> -&gt; <code>servers</code> -&gt; <code>ipAddress</code> property, fill in the public address of the proxy server. Both IPv4 and IPv6 addresses are supported.</li> <li>[Optional] If you have registered a domain name for the proxy server, please fill in the domain name in <code>profiles</code> -&gt; <code>servers</code> -&gt; <code>domainName</code>. Otherwise, do not modify this property.</li> <li>Fill in <code>profiles</code> -&gt; <code>servers</code> -&gt; <code>portBindings</code> -&gt; <code>port</code> with the TCP or UDP port number that mita is listening to. The port number must be the same as the one set in the proxy server. If you want to listen to a range of consecutive port numbers, you can also use the <code>portRange</code> property instead.</li> <li>[Optional] Specify a value between 1280 and 1400 for the <code>profiles</code> -&gt; <code>mtu</code> property. The default value is 1400. This value must be the same as proxy server.</li> <li>[Optional] If you want to adjust the frequency of multiplexing, you can set a value for the <code>profiles</code> -&gt; <code>multiplexing</code> -&gt; <code>level</code> property. The values you can use here include <code>MULTIPLEXING_OFF</code>, <code>MULTIPLEXING_LOW</code>, <code>MULTIPLEXING_MIDDLE</code>, and <code>MULTIPLEXING_HIGH</code>. <code>MULTIPLEXING_OFF</code> will disable multiplexing, and the default value is <code>MULTIPLEXING_LOW</code>.</li> <li>Please specify a value between 1025 and 65535 for the <code>rpcPort</code> property.</li> <li>Please specify a value between 1025 and 65535 for the <code>socks5Port</code> property. This port cannot be the same as <code>rpcPort</code>.</li> <li>[Optional] If the client needs to provide proxy services to other devices on the LAN, set the <code>socks5ListenLAN</code> property to <code>true</code>.</li> <li>[Optional] If you want to enable HTTP / HTTPS proxy, Please specify a value between 1025 and 65535 for the <code>httpProxyPort</code> property. This port cannot be the same as <code>rpcPort</code> or <code>socks5Port</code>. If the client needs to provide HTTP / HTTPS proxy services to other devices on the LAN, set the <code>httpProxyListenLAN</code> property to <code>true</code>. If you want to disable HTTP / HTTPS proxy, please delete <code>httpProxyPort</code> and <code>httpProxyListenLAN</code> property.</li> </ol> <p>If you have multiple proxy servers installed, or one server listening on multiple ports, you can add them all to the client settings. Each time a new connection is created, mieru will randomly select one of the servers and one of the ports. If you are using multiple servers, make sure that each server has the mita proxy service started.</p> <p>Assuming the file name of this configuration file is <code>client_config.json</code>, call command <code>mieru apply config client_config.json</code> to write the configuration after it has been modified.</p> <p>If the configuration is incorrect, mieru will print the problem that occurred. Follow the prompts to modify the configuration file and re-run the <code>mieru apply config &lt;FILE&gt;</code> command to write the configuration.</p> <p>After that, invoke command</p> <pre><code>mieru describe config\n</code></pre> <p>to check the current proxy settings.</p>"},{"location":"client-install/#start-proxy-client","title":"Start proxy client","text":"<pre><code>mieru start\n</code></pre> <p>If the output shows <code>mieru client is started, listening to xxxxx</code>, it means that the mieru client is running in the background.</p> <p>The mieru client will not be started automatically with system boot. After restarting the computer, you need to start the client manually with the <code>mieru start</code> command.</p> <p>Windows users should note that after starting the client with the <code>mieru start</code> command at the command prompt or Powershell, do not close the command prompt or Powershell window. Closing the window will cause the mieru client to exit. Some new versions of Windows allow users to minimize the command prompt or Powershell to the tray.</p> <p>If you need to stop the mieru client, enter the following command</p> <pre><code>mieru stop\n</code></pre> <p>Note that every time you change the settings with <code>mieru apply config &lt;FILE&gt;</code>, you need to restart the client with <code>mieru stop</code> and <code>mieru start</code> for the new settings to take effect.</p>"},{"location":"client-install/#test-the-connection-between-client-and-server","title":"Test the Connection Between Client and Server","text":"<pre><code>mieru test\n\nOR\n\nmieru test https://&lt;website.you.want.to.connect&gt;\n</code></pre> <p>If the output shows <code>Connected to ...</code>, it indicates that the mieru client has successfully connected to the proxy server.</p>"},{"location":"client-install/#configuring-the-browser","title":"Configuring the browser","text":"<p>Chrome / Firefox and other browsers can use socks5 proxy to access blocked websites by installing browser plugins. For the address of the socks5 proxy, please fill in <code>127.0.0.1:xxxx</code>, where <code>xxxx</code> is the value of <code>socks5Port</code> in the client settings. This address will also be printed when the <code>mieru start</code> command is called.</p> <p>mieru doesn't use socks5 authentication.</p> <p>For configuring the socks5 proxy in the Tor browser, see the Security Guide.</p>"},{"location":"client-install/#advanced-settings","title":"Advanced Settings","text":""},{"location":"client-install/#socks5-username-and-password-authentication","title":"socks5 Username and Password Authentication","text":"<p>If you want to require applications to authenticate the socks5 proxy using a username and password, you can add the <code>socks5Authentication</code> property to the client configuration. An example is as follows:</p> <pre><code>{\n    \"socks5Authentication\": [\n        {\n            \"user\": \"yitukai\",\n            \"password\": \"manlianpenfen\"\n        },\n        {\n            \"user\": \"shilishanlu\",\n            \"password\": \"buhuanjian\"\n        }\n    ]\n}\n</code></pre> <p>Applications can choose any user and password in the <code>socks5Authentication</code> list to authenticate the socks5 proxy.</p> <p>socks5 username and password authentication is not compatible with HTTP / HTTPS proxy. Since HTTP / HTTPS proxy does not require username and password authentication, based on threat model, mieru prohibits the use of HTTP / HTTPS proxy in conjunction with socks5 username and password authentication.</p> <p>If you need to delete an existing HTTP / HTTPS proxy configuration, please run the <code>mieru delete http proxy</code> command. If you want to delete the socks5 username and password authentication settings, please run the <code>mieru delete socks5 authentication</code> command.</p>"},{"location":"client-install/#sharing-client-settings","title":"Sharing Client Settings","text":"<p>Users can use commands <code>mieru export config</code> or <code>mieru export config simple</code> to generate URL links to share the client's configuration. These URL links can be imported into other clients using command <code>mieru import config &lt;URL&gt;</code>.</p>"},{"location":"client-install/#standard-sharing-link","title":"Standard Sharing Link","text":"<p>Use command <code>mieru export config</code> to generate a standard sharing link. For example:</p> <pre><code>mieru://CpsBCgdkZWZhdWx0ElgKBWJhb3ppEg1tYW5saWFucGVuZmVuGkA0MGFiYWM0MGY1OWRhNTVkYWQ2YTk5ODMxYTUxMTY1MjJmYmM4MGUzODViYjFhYjE0ZGM1MmRiMzY4ZjczOGE0Gi8SCWxvY2FsaG9zdBoFCIo0EAIaDRACGgk5OTk5LTk5OTkaBQjZMhABGgUIoCYQASD4CioCCAQSB2RlZmF1bHQYnUYguAgwBTgA\n</code></pre> <p>A standard sharing link starts with <code>mieru://</code> and uses base64 encoding for the full client configuration. Users can use the standard sharing link to replicate the client configuration on a brand new device.</p>"},{"location":"client-install/#simple-sharing-link","title":"Simple Sharing Link","text":"<p>Use command <code>mieru export config simple</code> to generate human-readable simple sharing links. For example:</p> <pre><code>mierus://baozi:manlianpenfen@1.2.3.4?mtu=1400&amp;multiplexing=MULTIPLEXING_HIGH&amp;port=6666&amp;port=9998-9999&amp;port=6489&amp;port=4896&amp;profile=default&amp;protocol=TCP&amp;protocol=TCP&amp;protocol=UDP&amp;protocol=UDP\n</code></pre> <p>The format of the simple sharing link is as follows:</p> <p><code>mierus://username:password@server_address?parameter_list</code></p> <p>A simple sharing link starts with <code>mierus://</code>, where <code>s</code> stands for <code>simple</code>.</p> <p>There is only one server address in a simple sharing link. If the client's configuration contains multiple servers, multiple links will be generated.</p> <p>The supported parameters are:</p> <ul> <li><code>profile</code></li> <li><code>mtu</code></li> <li><code>multiplexing</code></li> <li><code>port</code></li> <li><code>protocol</code></li> </ul> <p>Among them, <code>profile</code> must appear once, <code>mtu</code> and <code>multiplexing</code> can appear at most once, <code>port</code> and <code>protocol</code> can appear multiple times, and they must appear the same number of times, such that the <code>port</code> and <code>protocol</code> at the same position can be associated. Additionally, <code>port</code> can also be used to specify a port range.</p> <p>The simple sharing link above is equivalent to the following client configuration fragment:</p> <pre><code>{\n    \"profileName\":  \"default\",\n    \"user\":  {\n        \"name\":  \"baozi\",\n        \"password\":  \"manlianpenfen\"\n    },\n    \"servers\":  [\n        {\n            \"ipAddress\":  \"1.2.3.4\",\n            \"portBindings\":  [\n                {\n                    \"port\":  6666,\n                    \"protocol\":  \"TCP\"\n                },\n                {\n                    \"protocol\":  \"TCP\",\n                    \"portRange\":  \"9998-9999\"\n                },\n                {\n                    \"port\":  6489,\n                    \"protocol\":  \"UDP\"\n                },\n                {\n                    \"port\":  4896,\n                    \"protocol\":  \"UDP\"\n                }\n            ]\n        }\n    ],\n    \"mtu\":  1400,\n    \"multiplexing\":  {\n        \"level\":  \"MULTIPLEXING_HIGH\"\n    }\n}\n</code></pre> <p>Note: a simple sharing link does not contain necessary client configurations such as <code>socks5Port</code>. Therefore, importing a simple sharing link on a brand new device will fail.</p>"},{"location":"client-install.zh_CN/","title":"\u5ba2\u6237\u7aef\u5b89\u88c5\u4e0e\u914d\u7f6e","text":""},{"location":"client-install.zh_CN/#mieru","title":"\u4e0b\u8f7d mieru \u5ba2\u6237\u7aef","text":"<p>mieru \u5ba2\u6237\u7aef\u8f6f\u4ef6\u652f\u6301 Windows\uff0cMac OS \u548c Linux \u7cfb\u7edf\u3002\u7528\u6237\u53ef\u4ee5\u5728 GitHub Releases \u9875\u9762\u4e0b\u8f7d\u3002\u89e3\u538b\u7f29\u540e\u8bf7\u5c06 mieru \u53ef\u6267\u884c\u6587\u4ef6\u653e\u7f6e\u4e8e\u7cfb\u7edf\u8def\u5f84 <code>PATH</code> \u4e2d\u3002</p> <p>\u5982\u679c\u4f60\u7684\u5ba2\u6237\u7aef\u64cd\u4f5c\u7cfb\u7edf\u662f Linux\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 debian \u548c RPM \u5b89\u88c5\u5305\u5b89\u88c5 mieru\u3002</p>"},{"location":"client-install.zh_CN/#_2","title":"\u4fee\u6539\u5ba2\u6237\u7aef\u7684\u8bbe\u7f6e","text":"<p>\u7528\u6237\u53ef\u4ee5\u901a\u8fc7</p> <pre><code>mieru apply config &lt;FILE&gt;\n</code></pre> <p>\u6307\u4ee4\u6765\u4fee\u6539\u5ba2\u6237\u7aef\u7684\u8bbe\u7f6e\uff0c\u8fd9\u91cc\u7684 <code>&lt;FILE&gt;</code> \u662f\u4e00\u4e2a JSON \u683c\u5f0f\u7684\u914d\u7f6e\u6587\u4ef6\u3002\u8be5\u914d\u7f6e\u6587\u4ef6\u4e0d\u9700\u8981\u6307\u5b9a\u5b8c\u6574\u7684\u5ba2\u6237\u7aef\u8bbe\u7f6e\u3002\u8fd0\u884c\u6307\u4ee4 <code>mieru apply config &lt;FILE&gt;</code> \u65f6\uff0c\u6587\u4ef6\u5185\u5bb9\u4f1a\u5408\u5e76\u5230\u4efb\u4f55\u5df2\u6709\u7684\u5ba2\u6237\u7aef\u8bbe\u7f6e\u3002</p> <p>\u5ba2\u6237\u7aef\u914d\u7f6e\u7684\u4e00\u4e2a\u793a\u4f8b\u5982\u4e0b\u3002</p> <pre><code>{\n    \"profiles\": [\n        {\n            \"profileName\": \"default\",\n            \"user\": {\n                \"name\": \"ducaiguozei\",\n                \"password\": \"xijinping\"\n            },\n            \"servers\": [\n                {\n                    \"ipAddress\": \"12.34.56.78\",\n                    \"domainName\": \"\",\n                    \"portBindings\": [\n                        {\n                            \"portRange\": \"2012-2022\",\n                            \"protocol\": \"TCP\"\n                        },\n                        {\n                            \"port\": 2027,\n                            \"protocol\": \"TCP\"\n                        }\n                    ]\n                }\n            ],\n            \"mtu\": 1400,\n            \"multiplexing\": {\n                \"level\": \"MULTIPLEXING_HIGH\"\n            }\n        }\n    ],\n    \"activeProfile\": \"default\",\n    \"rpcPort\": 8964,\n    \"socks5Port\": 1080,\n    \"loggingLevel\": \"INFO\",\n    \"socks5ListenLAN\": false,\n    \"httpProxyPort\": 8080,\n    \"httpProxyListenLAN\": false\n}\n</code></pre> <p>\u8bf7\u7528\u6587\u672c\u7f16\u8f91\u5668\u4fee\u6539\u5982\u4e0b\u7684\u5185\u5bb9\uff1a</p> <ol> <li>\u5728 <code>profiles</code> -&gt; <code>user</code> -&gt; <code>name</code> \u5c5e\u6027\u4e2d\uff0c\u586b\u5199\u7528\u6237\u540d\u3002\u6b64\u5904\u5fc5\u987b\u4e0e\u4ee3\u7406\u670d\u52a1\u5668\u4e2d\u7684\u8bbe\u7f6e\u76f8\u540c\u3002</li> <li>\u5728 <code>profiles</code> -&gt; <code>user</code> -&gt; <code>password</code> \u5c5e\u6027\u4e2d\uff0c\u586b\u5199\u5bc6\u7801\u3002\u6b64\u5904\u5fc5\u987b\u4e0e\u4ee3\u7406\u670d\u52a1\u5668\u4e2d\u7684\u8bbe\u7f6e\u76f8\u540c\u3002</li> <li>\u5728 <code>profiles</code> -&gt; <code>servers</code> -&gt; <code>ipAddress</code> \u5c5e\u6027\u4e2d\uff0c\u586b\u5199\u4ee3\u7406\u670d\u52a1\u5668\u7684\u516c\u7f51\u5730\u5740\u3002\u652f\u6301 IPv4 \u548c IPv6 \u5730\u5740\u3002</li> <li>\u3010\u53ef\u9009\u3011\u5982\u679c\u4f60\u4e3a\u4ee3\u7406\u670d\u52a1\u5668\u6ce8\u518c\u4e86\u57df\u540d\uff0c\u8bf7\u5728 <code>profiles</code> -&gt; <code>servers</code> -&gt; <code>domainName</code> \u4e2d\u586b\u5199\u57df\u540d\u3002\u5426\u5219\uff0c\u8bf7\u52ff\u4fee\u6539\u8fd9\u4e2a\u5c5e\u6027\u3002</li> <li>\u5728 <code>profiles</code> -&gt; <code>servers</code> -&gt; <code>portBindings</code> -&gt; <code>port</code> \u4e2d\u586b\u5199 mita \u76d1\u542c\u7684 TCP \u6216 UDP \u7aef\u53e3\u53f7\u3002\u8fd9\u4e2a\u7aef\u53e3\u53f7\u5fc5\u987b\u4e0e\u4ee3\u7406\u670d\u52a1\u5668\u4e2d\u7684\u8bbe\u7f6e\u76f8\u540c\u3002\u5982\u679c\u60f3\u8981\u76d1\u542c\u8fde\u7eed\u7684\u7aef\u53e3\u53f7\uff0c\u4e5f\u53ef\u4ee5\u6539\u4e3a\u4f7f\u7528 <code>portRange</code> \u5c5e\u6027\u3002</li> <li>\u3010\u53ef\u9009\u3011\u8bf7\u4e3a <code>profiles</code> -&gt; <code>mtu</code> \u5c5e\u6027\u4e2d\u6307\u5b9a\u4e00\u4e2a\u4ece 1280 \u5230 1400 \u4e4b\u95f4\u7684\u503c\u3002\u9ed8\u8ba4\u503c\u4e3a 1400\u3002\u8fd9\u4e2a\u503c\u5fc5\u987b\u4e0e\u4ee3\u7406\u670d\u52a1\u5668\u76f8\u540c\u3002</li> <li>\u3010\u53ef\u9009\u3011\u5982\u679c\u60f3\u8981\u8c03\u6574\u591a\u8def\u590d\u7528\u7684\u9891\u7387\uff0c\u662f\u66f4\u591a\u5730\u521b\u5efa\u65b0\u8fde\u63a5\uff0c\u8fd8\u662f\u66f4\u591a\u5730\u91cd\u7528\u65e7\u8fde\u63a5\uff0c\u53ef\u4ee5\u4e3a <code>profiles</code> -&gt; <code>multiplexing</code> -&gt; <code>level</code> \u5c5e\u6027\u8bbe\u5b9a\u4e00\u4e2a\u503c\u3002\u8fd9\u91cc\u53ef\u4ee5\u4f7f\u7528\u7684\u503c\u5305\u62ec <code>MULTIPLEXING_OFF</code>, <code>MULTIPLEXING_LOW</code>, <code>MULTIPLEXING_MIDDLE</code>, <code>MULTIPLEXING_HIGH</code>\u3002\u5176\u4e2d <code>MULTIPLEXING_OFF</code> \u4f1a\u5173\u95ed\u591a\u8def\u590d\u7528\u529f\u80fd\u3002\u9ed8\u8ba4\u503c\u4e3a <code>MULTIPLEXING_LOW</code>\u3002</li> <li>\u8bf7\u4e3a <code>rpcPort</code> \u5c5e\u6027\u6307\u5b9a\u4e00\u4e2a\u4ece 1025 \u5230 65535 \u4e4b\u95f4\u7684\u6570\u503c\u3002</li> <li>\u8bf7\u4e3a <code>socks5Port</code> \u5c5e\u6027\u6307\u5b9a\u4e00\u4e2a\u4ece 1025 \u5230 65535 \u4e4b\u95f4\u7684\u6570\u503c\u3002\u8be5\u7aef\u53e3\u4e0d\u80fd\u4e0e <code>rpcPort</code> \u76f8\u540c\u3002</li> <li>\u3010\u53ef\u9009\u3011\u5982\u679c\u5ba2\u6237\u7aef\u9700\u8981\u4e3a\u5c40\u57df\u7f51\u4e2d\u7684\u5176\u4ed6\u8bbe\u5907\u63d0\u4f9b\u4ee3\u7406\u670d\u52a1\uff0c\u8bf7\u5c06 <code>socks5ListenLAN</code> \u5c5e\u6027\u8bbe\u7f6e\u4e3a <code>true</code>\u3002</li> <li>\u3010\u53ef\u9009\u3011\u5982\u679c\u8981\u542f\u52a8 HTTP / HTTPS \u4ee3\u7406\uff0c\u8bf7\u4e3a <code>httpProxyPort</code> \u5c5e\u6027\u6307\u5b9a\u4e00\u4e2a\u4ece 1025 \u5230 65535 \u4e4b\u95f4\u7684\u6570\u503c\u3002\u8be5\u7aef\u53e3\u4e0d\u80fd\u4e0e <code>rpcPort</code> \u548c <code>socks5Port</code> \u76f8\u540c\u3002\u5982\u679c\u9700\u8981\u4e3a\u5c40\u57df\u7f51\u4e2d\u7684\u5176\u4ed6\u8bbe\u5907\u63d0\u4f9b HTTP / HTTPS \u4ee3\u7406\uff0c\u8bf7\u5c06 <code>httpProxyListenLAN</code> \u5c5e\u6027\u8bbe\u7f6e\u4e3a <code>true</code>\u3002\u5982\u679c\u4e0d\u9700\u8981 HTTP / HTTPS \u4ee3\u7406\uff0c\u8bf7\u5220\u9664 <code>httpProxyPort</code> \u548c <code>httpProxyListenLAN</code> \u5c5e\u6027\u3002</li> </ol> <p>\u5982\u679c\u4f60\u5b89\u88c5\u4e86\u591a\u53f0\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u6216\u8005\u4e00\u53f0\u670d\u52a1\u5668\u76d1\u542c\u591a\u4e2a\u7aef\u53e3\uff0c\u53ef\u4ee5\u628a\u5b83\u4eec\u90fd\u6dfb\u52a0\u5230\u5ba2\u6237\u7aef\u8bbe\u7f6e\u4e2d\u3002\u6bcf\u6b21\u53d1\u8d77\u65b0\u7684\u8fde\u63a5\u65f6\uff0cmieru \u4f1a\u968f\u673a\u9009\u53d6\u5176\u4e2d\u7684\u4e00\u53f0\u670d\u52a1\u5668\u548c\u4e00\u4e2a\u7aef\u53e3\u3002\u5982\u679c\u4f7f\u7528\u4e86\u591a\u53f0\u670d\u52a1\u5668\uff0c\u8bf7\u786e\u4fdd\u6bcf\u4e00\u53f0\u670d\u52a1\u5668\u90fd\u542f\u52a8\u4e86 mita \u4ee3\u7406\u670d\u52a1\u3002</p> <p>\u5047\u8bbe\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u7684\u6587\u4ef6\u540d\u662f <code>client_config.json</code>\uff0c\u5728\u4fee\u6539\u5b8c\u6210\u4e4b\u540e\uff0c\u8c03\u7528\u6307\u4ee4 <code>mieru apply config client_config.json</code> \u5199\u5165\u8be5\u914d\u7f6e\u3002</p> <p>\u5982\u679c\u914d\u7f6e\u6709\u8bef\uff0cmieru \u4f1a\u6253\u5370\u51fa\u73b0\u7684\u95ee\u9898\u3002\u8bf7\u6839\u636e\u63d0\u793a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u91cd\u65b0\u8fd0\u884c <code>mieru apply config &lt;FILE&gt;</code> \u6307\u4ee4\u5199\u5165\u4fee\u6b63\u540e\u7684\u914d\u7f6e\u3002</p> <p>\u5199\u5165\u540e\uff0c\u53ef\u4ee5\u7528</p> <pre><code>mieru describe config\n</code></pre> <p>\u6307\u4ee4\u67e5\u770b\u5f53\u524d\u8bbe\u7f6e\u3002</p>"},{"location":"client-install.zh_CN/#_3","title":"\u542f\u52a8\u5ba2\u6237\u7aef","text":"<pre><code>mieru start\n</code></pre> <p>\u5982\u679c\u8f93\u51fa\u663e\u793a <code>mieru client is started, listening to xxxxx</code>\uff0c\u8868\u793a mieru \u5ba2\u6237\u7aef\u5df2\u7ecf\u5728\u540e\u53f0\u5f00\u59cb\u8fd0\u884c\u3002</p> <p>mieru \u5ba2\u6237\u7aef\u4e0d\u4f1a\u4e0e\u7cfb\u7edf\u4e00\u540c\u542f\u52a8\u3002\u5728\u91cd\u65b0\u542f\u52a8\u8ba1\u7b97\u673a\u540e\uff0c\u9700\u8981\u624b\u52a8\u4f7f\u7528 <code>mieru start</code> \u6307\u4ee4\u542f\u52a8\u5ba2\u6237\u7aef\u3002</p> <p>Windows \u7528\u6237\u8bf7\u6ce8\u610f\uff0c\u5728\u547d\u4ee4\u63d0\u793a\u7b26\u6216 Powershell \u4e2d\u4f7f\u7528 <code>mieru start</code> \u6307\u4ee4\u542f\u52a8\u5ba2\u6237\u7aef\u4e4b\u540e\uff0c\u8bf7\u52ff\u5173\u95ed\u547d\u4ee4\u63d0\u793a\u7b26\u6216 Powershell \u7a97\u53e3\u3002\u5173\u95ed\u7a97\u53e3\u5c06\u5bfc\u81f4 mieru \u5ba2\u6237\u7aef\u505c\u6b62\u8fd0\u884c\u3002 \u4e00\u4e9b\u65b0\u7248\u672c\u7684 Windows \u5141\u8bb8\u7528\u6237\u628a\u547d\u4ee4\u63d0\u793a\u7b26\u6216 Powershell \u6700\u5c0f\u5316\u5230\u6258\u76d8\u3002</p> <p>\u5982\u679c\u9700\u8981\u505c\u6b62 mieru \u5ba2\u6237\u7aef\uff0c\u8bf7\u8f93\u5165\u6307\u4ee4</p> <pre><code>mieru stop\n</code></pre> <p>\u6ce8\u610f\uff0c\u6bcf\u6b21\u4f7f\u7528 <code>mieru apply config &lt;FILE&gt;</code> \u4fee\u6539\u8bbe\u7f6e\u540e\uff0c\u9700\u8981\u7528 <code>mieru stop</code> \u548c <code>mieru start</code> \u91cd\u542f\u5ba2\u6237\u7aef\uff0c\u624d\u80fd\u4f7f\u65b0\u8bbe\u7f6e\u751f\u6548\u3002</p>"},{"location":"client-install.zh_CN/#_4","title":"\u6d4b\u8bd5\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u7684\u8fde\u63a5","text":"<pre><code>mieru test\n\n\u6216\u8005\n\nmieru test https://&lt;website.you.want.to.connect&gt;\n</code></pre> <p>\u5982\u679c\u8f93\u51fa\u663e\u793a <code>Connected to ...</code>\uff0c\u8868\u793a mieru \u5ba2\u6237\u7aef\u6210\u529f\u8fde\u63a5\u4e86\u4ee3\u7406\u670d\u52a1\u5668\u3002</p>"},{"location":"client-install.zh_CN/#_5","title":"\u914d\u7f6e\u6d4f\u89c8\u5668","text":"<p>Chrome / Firefox \u7b49\u6d4f\u89c8\u5668\u53ef\u4ee5\u901a\u8fc7\u5b89\u88c5\u63d2\u4ef6\uff0c\u4f7f\u7528 socks5 \u4ee3\u7406\u8bbf\u95ee\u5899\u5916\u7684\u7f51\u7ad9\u3002\u5173\u4e8e socks5 \u4ee3\u7406\u7684\u5730\u5740\uff0c\u8bf7\u586b\u5199 <code>127.0.0.1:xxxx</code>\uff0c\u5176\u4e2d <code>xxxx</code> \u662f\u5ba2\u6237\u7aef\u8bbe\u7f6e\u4e2d <code>socks5Port</code> \u7684\u503c\u3002\u8fd9\u4e2a\u5730\u5740\u5728\u8c03\u7528 <code>mieru start</code> \u6307\u4ee4\u65f6\u4e5f\u4f1a\u6253\u5370\u51fa\u6765\u3002</p> <p>mieru \u4e0d\u4f7f\u7528 socks5 \u7528\u6237\u540d\u548c\u5bc6\u7801\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002</p> <p>\u5173\u4e8e\u5728 Tor \u6d4f\u89c8\u5668\u4e2d\u914d\u7f6e socks5 \u4ee3\u7406\uff0c\u53c2\u89c1\u7ffb\u5899\u5b89\u5168\u6307\u5357\u3002</p>"},{"location":"client-install.zh_CN/#_6","title":"\u9ad8\u7ea7\u8bbe\u7f6e","text":""},{"location":"client-install.zh_CN/#socks5","title":"socks5 \u7528\u6237\u540d\u548c\u5bc6\u7801\u9a8c\u8bc1","text":"<p>\u5982\u679c\u4f60\u60f3\u8981\u8ba9\u5e94\u7528\u7a0b\u5e8f\u5fc5\u987b\u901a\u8fc7\u7528\u6237\u540d\u548c\u5bc6\u7801\u9a8c\u8bc1\u624d\u80fd\u8bbf\u95ee socks5 \u4ee3\u7406\uff0c\u53ef\u4ee5\u5728\u5ba2\u6237\u7aef\u8bbe\u7f6e\u4e2d\u6dfb\u52a0 <code>socks5Authentication</code> \u5c5e\u6027\u3002\u4e00\u4e2a\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>{\n    \"socks5Authentication\": [\n        {\n            \"user\": \"yitukai\",\n            \"password\": \"manlianpenfen\"\n        },\n        {\n            \"user\": \"shilishanlu\",\n            \"password\": \"buhuanjian\"\n        }\n    ]\n}\n</code></pre> <p>\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u9009\u62e9 <code>socks5Authentication</code> \u5217\u8868\u4e2d\u7684\u4efb\u610f\u4e00\u7ec4\u7528\u6237\u540d\u548c\u5bc6\u7801\u8bbf\u95ee socks5 \u4ee3\u7406\u3002</p> <p>socks5 \u7528\u6237\u540d\u548c\u5bc6\u7801\u9a8c\u8bc1\u4e0e HTTP / HTTPS \u4ee3\u7406\u4e0d\u517c\u5bb9\u3002 \u56e0\u4e3a HTTP / HTTPS \u4ee3\u7406\u4e0d\u9700\u8981\u7528\u6237\u540d\u548c\u5bc6\u7801\u9a8c\u8bc1\uff0c\u6839\u636e\u5a01\u80c1\u6a21\u578b\uff0cmieru \u7981\u6b62\u5728\u4f7f\u7528 socks5 \u7528\u6237\u540d\u548c\u5bc6\u7801\u9a8c\u8bc1\u7684\u540c\u65f6\u4f7f\u7528 HTTP / HTTPS \u4ee3\u7406\u3002</p> <p>\u5982\u679c\u9700\u8981\u5220\u9664\u5df2\u6709\u7684 HTTP / HTTPS \u4ee3\u7406\u914d\u7f6e\uff0c\u8bf7\u8fd0\u884c <code>mieru delete http proxy</code> \u6307\u4ee4\u3002\u5982\u679c\u60f3\u8981\u5220\u9664 socks5 \u7528\u6237\u540d\u548c\u5bc6\u7801\u9a8c\u8bc1\u7684\u8bbe\u7f6e\uff0c\u8bf7\u8fd0\u884c <code>mieru delete socks5 authentication</code> \u6307\u4ee4\u3002</p>"},{"location":"client-install.zh_CN/#_7","title":"\u5206\u4eab\u5ba2\u6237\u7aef\u7684\u8bbe\u7f6e","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 <code>mieru export config</code> \u6216\u8005 <code>mieru export config simple</code> \u6307\u4ee4\u751f\u6210 URL \u94fe\u63a5\uff0c\u6765\u5206\u4eab\u5ba2\u6237\u7aef\u7684\u914d\u7f6e\u3002\u8fd9\u4e9b URL \u94fe\u63a5\u53ef\u4ee5\u4f7f\u7528 <code>mieru import config &lt;URL&gt;</code> \u6307\u4ee4\u5bfc\u5165\u81f3\u5176\u4ed6\u5ba2\u6237\u7aef\u3002</p>"},{"location":"client-install.zh_CN/#_8","title":"\u6807\u51c6\u5206\u4eab\u94fe\u63a5","text":"<p>\u4f7f\u7528\u6307\u4ee4 <code>mieru export config</code> \u751f\u6210\u4e00\u4e2a\u6807\u51c6\u5206\u4eab\u94fe\u63a5\u3002\u4f8b\u5982\uff1a</p> <pre><code>mieru://CpsBCgdkZWZhdWx0ElgKBWJhb3ppEg1tYW5saWFucGVuZmVuGkA0MGFiYWM0MGY1OWRhNTVkYWQ2YTk5ODMxYTUxMTY1MjJmYmM4MGUzODViYjFhYjE0ZGM1MmRiMzY4ZjczOGE0Gi8SCWxvY2FsaG9zdBoFCIo0EAIaDRACGgk5OTk5LTk5OTkaBQjZMhABGgUIoCYQASD4CioCCAQSB2RlZmF1bHQYnUYguAgwBTgA\n</code></pre> <p>\u6807\u51c6\u5206\u4eab\u94fe\u63a5\u4ee5 <code>mieru://</code> \u5f00\u59cb\uff0c\u4f7f\u7528 base64 \u7f16\u7801\u5b8c\u6574\u7684\u5ba2\u6237\u7aef\u914d\u7f6e\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u6807\u51c6\u5206\u4eab\u94fe\u63a5\u5728\u4e00\u53f0\u5168\u65b0\u7684\u8bbe\u5907\u4e0a\u590d\u523b\u5ba2\u6237\u7aef\u914d\u7f6e\u3002</p>"},{"location":"client-install.zh_CN/#_9","title":"\u7b80\u5355\u5206\u4eab\u94fe\u63a5","text":"<p>\u4f7f\u7528\u6307\u4ee4 <code>mieru export config simple</code> \u751f\u6210\u4eba\u7c7b\u53ef\u8bfb\u7684\u7b80\u5355\u5206\u4eab\u94fe\u63a5\u3002\u4f8b\u5982\uff1a</p> <pre><code>mierus://baozi:manlianpenfen@1.2.3.4?mtu=1400&amp;multiplexing=MULTIPLEXING_HIGH&amp;port=6666&amp;port=9998-9999&amp;port=6489&amp;port=4896&amp;profile=default&amp;protocol=TCP&amp;protocol=TCP&amp;protocol=UDP&amp;protocol=UDP\n</code></pre> <p>\u7b80\u5355\u5206\u4eab\u94fe\u63a5\u7684\u683c\u5f0f\u5982\u4e0b\uff1a</p> <p><code>mierus://\u7528\u6237\u540d:\u5bc6\u7801@\u670d\u52a1\u5668\u5730\u5740?\u53c2\u6570\u5217\u8868</code></p> <p>\u7b80\u5355\u5206\u4eab\u94fe\u63a5\u4ee5 <code>mierus://</code> \u5f00\u59cb\uff0c\u5176\u4e2d <code>s</code> \u8868\u793a <code>simple</code>\u3002</p> <p>\u7b80\u5355\u5206\u4eab\u94fe\u63a5\u4e2d\u53ea\u6709\u4e00\u4e2a\u670d\u52a1\u5668\u5730\u5740\u3002\u5982\u679c\u5ba2\u6237\u7aef\u7684\u8bbe\u7f6e\u542b\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u5219\u4f1a\u751f\u6210\u591a\u4e2a\u94fe\u63a5\u3002</p> <p>\u94fe\u63a5\u4e2d\u652f\u6301\u7684\u53c2\u6570\u5217\u8868\u5982\u4e0b\uff1a</p> <ul> <li><code>profile</code></li> <li><code>mtu</code></li> <li><code>multiplexing</code></li> <li><code>port</code></li> <li><code>protocol</code></li> </ul> <p>\u5176\u4e2d <code>profile</code> \u5fc5\u987b\u51fa\u73b0\u4e00\u6b21\uff0c<code>mtu</code> \u4ee5\u53ca <code>multiplexing</code> \u6700\u591a\u51fa\u73b0\u4e00\u6b21\uff0c<code>port</code> \u548c <code>protocol</code> \u53ef\u4ee5\u51fa\u73b0\u591a\u6b21\uff0c\u4e14\u4ed6\u4eec\u51fa\u73b0\u7684\u6b21\u6570\u5fc5\u987b\u76f8\u540c\uff0c\u4ee5\u4fbf\u5c06\u540c\u4e00\u4f4d\u7f6e\u4e0a\u7684 <code>port</code> \u548c <code>protocol</code> \u8054\u7cfb\u8d77\u6765\u3002\u53e6\u5916 <code>port</code> \u4e5f\u53ef\u4ee5\u7528\u6765\u6307\u5b9a\u4e00\u6bb5\u8fde\u7eed\u7684\u7aef\u53e3\u3002</p> <p>\u4e0a\u9762\u7684\u7b80\u5355\u5206\u4eab\u94fe\u63a5\u7b49\u540c\u4e8e\u5982\u4e0b\u7684\u5ba2\u6237\u7aef\u914d\u7f6e\u7247\u6bb5\uff1a</p> <pre><code>{\n    \"profileName\":  \"default\",\n    \"user\":  {\n        \"name\":  \"baozi\",\n        \"password\":  \"manlianpenfen\"\n    },\n    \"servers\":  [\n        {\n            \"ipAddress\":  \"1.2.3.4\",\n            \"portBindings\":  [\n                {\n                    \"port\":  6666,\n                    \"protocol\":  \"TCP\"\n                },\n                {\n                    \"protocol\":  \"TCP\",\n                    \"portRange\":  \"9998-9999\"\n                },\n                {\n                    \"port\":  6489,\n                    \"protocol\":  \"UDP\"\n                },\n                {\n                    \"port\":  4896,\n                    \"protocol\":  \"UDP\"\n                }\n            ]\n        }\n    ],\n    \"mtu\":  1400,\n    \"multiplexing\":  {\n        \"level\":  \"MULTIPLEXING_HIGH\"\n    }\n}\n</code></pre> <p>\u6ce8\u610f\uff0c\u7b80\u5355\u5206\u4eab\u94fe\u63a5\u4e0d\u542b\u6709 <code>socks5Port</code> \u7b49\u5fc5\u8981\u7684\u5ba2\u6237\u7aef\u914d\u7f6e\u3002\u56e0\u6b64\uff0c\u5728\u5168\u65b0\u7684\u8bbe\u5907\u4e0a\u5bfc\u5165\u7b80\u5355\u5206\u4eab\u94fe\u63a5\u4f1a\u5931\u8d25\u3002</p>"},{"location":"compile/","title":"Compilation","text":"<p>It is recommended to compile the <code>mieru</code> client and <code>mita</code> server software on Linux. The compilation process might require a proxy to download dependency packages.</p> <p>The following softwares are required for compilation:</p> <ul> <li>curl</li> <li>env</li> <li>git</li> <li>go (version &gt;= 1.20)</li> <li>make</li> <li>sha256sum</li> <li>tar</li> <li>zip</li> </ul> <p>To compile Android executables, you need:</p> <ul> <li>gcc</li> </ul> <p>To compile Debian packages, you need:</p> <ul> <li>dpkg-deb</li> <li>fakeroot</li> </ul> <p>To compile RPM packages, you need:</p> <ul> <li>rpmbuild</li> </ul> <p>To compile, navigate to the project's root directory and run the command <code>make</code>. The compilation results will be stored in the <code>release</code> folder under the project's root directory.</p> <p>The <code>make</code> command will only generate the officially supported executables. If you want to compile executables for a specific CPU instruction set architecture or operating system, you can refer to the following commands:</p> <pre><code># Compile the mita server software, which runs on a Linux system with Loongson processor\nenv GOOS=linux GOARCH=loong64 CGO_ENABLED=0 go build -trimpath -ldflags=\"-s -w\" -o mita cmd/mita/mita.go\n\n# Compile the mieru client software, which runs on a FreeBSD system with x86_64 processor\nenv GOOS=freebsd GOARCH=amd64 CGO_ENABLED=0 go build -trimpath -ldflags=\"-s -w\" -o mieru cmd/mieru/mieru.go\n\n# Compile the mieru client software, which runs on an OpenWRT system with MIPS processor\nenv GOOS=linux GOARCH=mips CGO_ENABLED=0 go build -trimpath -ldflags=\"-s -w\" -o mieru cmd/mieru/mieru.go\n</code></pre> <p>Note: The <code>mita</code> server software may not run on operating systems other than Linux.</p>"},{"location":"compile.zh_CN/","title":"\u7f16\u8bd1","text":"<p>\u7f16\u8bd1 mieru \u5ba2\u6237\u7aef\u548c mita \u670d\u52a1\u5668\u8f6f\u4ef6\uff0c\u5efa\u8bae\u5728 Linux \u7cfb\u7edf\u4e2d\u8fdb\u884c\u3002\u7f16\u8bd1\u8fc7\u7a0b\u53ef\u80fd\u9700\u8981\u7ffb\u5899\u4e0b\u8f7d\u4f9d\u8d56\u7684\u8f6f\u4ef6\u5305\u3002</p> <p>\u7f16\u8bd1\u6240\u9700\u7684\u8f6f\u4ef6\u5305\u62ec\uff1a</p> <ul> <li>curl</li> <li>env</li> <li>git</li> <li>go (version &gt;= 1.20)</li> <li>make</li> <li>sha256sum</li> <li>tar</li> <li>zip</li> </ul> <p>\u7f16\u8bd1 Android \u53ef\u6267\u884c\u6587\u4ef6\u9700\u8981\uff1a</p> <ul> <li>gcc</li> </ul> <p>\u7f16\u8bd1 Debian \u5b89\u88c5\u5305\u9700\u8981\uff1a</p> <ul> <li>dpkg-deb</li> <li>fakeroot</li> </ul> <p>\u7f16\u8bd1 RPM \u5b89\u88c5\u5305\u9700\u8981\uff1a</p> <ul> <li>rpmbuild</li> </ul> <p>\u7f16\u8bd1\u65f6\uff0c\u8fdb\u5165\u9879\u76ee\u6839\u76ee\u5f55\uff0c\u8fd0\u884c\u6307\u4ee4 <code>make</code> \u5373\u53ef\u3002\u7f16\u8bd1\u7ed3\u679c\u4f1a\u5b58\u653e\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u7684 <code>release</code> \u6587\u4ef6\u5939\u3002</p> <p><code>make</code> \u6307\u4ee4\u53ea\u4f1a\u751f\u6210\u5b98\u65b9\u652f\u6301\u7684\u53ef\u6267\u884c\u6587\u4ef6\u3002\u5982\u679c\u4f60\u60f3\u8981\u7f16\u8bd1\u7279\u5b9a CPU \u6307\u4ee4\u96c6\u67b6\u6784\u6216\u64cd\u4f5c\u7cfb\u7edf\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u51e0\u4e2a\u6307\u4ee4\uff1a</p> <pre><code># \u7f16\u8bd1\u53ef\u4ee5\u5728\u9f99\u82af\u5904\u7406\u5668 Linux \u7cfb\u7edf\u4e0a\u8fd0\u884c\u7684 mita \u670d\u52a1\u5668\u8f6f\u4ef6\nenv GOOS=linux GOARCH=loong64 CGO_ENABLED=0 go build -trimpath -ldflags=\"-s -w\" -o mita cmd/mita/mita.go\n\n# \u7f16\u8bd1\u53ef\u4ee5\u5728 x86_64 \u5904\u7406\u5668 FreeBSD \u7cfb\u7edf\u4e0a\u8fd0\u884c\u7684 mieru \u5ba2\u6237\u7aef\u8f6f\u4ef6\nenv GOOS=freebsd GOARCH=amd64 CGO_ENABLED=0 go build -trimpath -ldflags=\"-s -w\" -o mieru cmd/mieru/mieru.go\n\n# \u7f16\u8bd1\u53ef\u4ee5\u5728 MIPS \u5904\u7406\u5668 OpenWRT \u7cfb\u7edf\u4e0a\u8fd0\u884c\u7684 mieru \u5ba2\u6237\u7aef\u8f6f\u4ef6\nenv GOOS=linux GOARCH=mips CGO_ENABLED=0 go build -trimpath -ldflags=\"-s -w\" -o mieru cmd/mieru/mieru.go\n</code></pre> <p>\u6ce8\u610f\uff0c<code>mita</code> \u670d\u52a1\u5668\u8f6f\u4ef6\u53ef\u80fd\u65e0\u6cd5\u5728 Linux \u4e4b\u5916\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u8fd0\u884c\u3002</p>"},{"location":"deployment/","title":"Deployment","text":""},{"location":"deployment/#hashicorp","title":"HashiCorp","text":"<pre><code>git clone git@github.com:QubitPi/mieru.git\ncd mieru/hashicorp\n</code></pre> <pre><code>export PKR_VAR_ec2_instance_type=Monday\n</code></pre>"},{"location":"naming.zh_CN/","title":"\u300e\u898b\u3048\u308b\u300f\u540d\u5b57\u7684\u7531\u6765","text":"<p>\"\u898b\u3048\u308b\"\uff08\u307f\u3048\u308b\uff0cmieru\uff09\u662f\u65e5\u8bed\u7684\u81ea\u52a8\u8bcd\uff0c\u4e3b\u8981\u8868\u793a\u201c\u770b\u5f97\u89c1\u201d\u3001\u201c\u80fd\u770b\u5230\u201d\u6216\u201c\u53ef\u89c1\u201d\u7684\u610f\u601d\u3002</p> <p>\u770b\u5f97\u89c1\u3001\u80fd\u770b\u89c1\uff1a\u8868\u793a\u67d0\u7269\u5904\u4e8e\u89c6\u89c9\u8303\u56f4\u5185\uff0c\u53ef\u4ee5\u88ab\u770b\u5230\u3002\u4f8b\u5982\uff1a</p> <ul> <li>\u5c71\uff08\u3084\u307e\uff09\u304c\u898b\u3048\u308b\u3002\u2014\u2014 \u53ef\u4ee5\u770b\u5230\u5c71\u3002</li> <li>\u7a93\uff08\u307e\u3069\uff09\u304b\u3089\u661f\uff08\u307b\u3057\uff09\u304c\u898b\u3048\u308b\u3002\u2014\u2014 \u4ece\u7a97\u6237\u53ef\u4ee5\u770b\u5230\u661f\u661f\u3002</li> </ul> <p>\u6211\u4eec\u5e0c\u671b\u7528\u6237\u4f7f\u7528 mieru \u80fd\u770b\u5230\u5899\u5916\u7684\u4fe1\u606f\u3002</p> <p>\u6b64\u5916\uff0c\u5728\u8868\u8fbe\u80fd\u529b\u6216\u53ef\u80fd\u6027\u65f6\uff0c\"\u898b\u3048\u308b\"\u8868\u793a\u81ea\u7136\u800c\u7136\u5730\u80fd\u770b\u5230\uff0c\u800c\u4e0d\u662f\u7ecf\u8fc7\u7279\u522b\u7684\u52aa\u529b\u3002\u4f8b\u5982\uff1a</p> <ul> <li>\u773c\u93e1\uff08\u3081\u304c\u306d\uff09\u3092\u304b\u3051\u308b\u3068\u3001\u3088\u304f\u898b\u3048\u308b\u3002\u2014\u2014 \u6234\u4e0a\u773c\u955c\u540e\uff0c\u770b\u5f97\u6e05\u695a\u4e86\u3002</li> </ul> <p>\u6211\u4eec\u5e0c\u671b\u7528\u6237\u4f7f\u7528 mieru \u7684\u8fc7\u7a0b\u5c3d\u53ef\u80fd\u7b80\u5355\uff0c\u4e0d\u9700\u8981\u7ecf\u8fc7\u7279\u522b\u7684\u52aa\u529b\u3002</p>"},{"location":"operation/","title":"Maintenance &amp; Troubleshooting","text":""},{"location":"operation/#view-the-current-connections-between-client-and-server","title":"View the current connections between client and server","text":"<p>You can run <code>mieru get connections</code> command on the client to view the current connections between client and server. An example of the command output is as follows.</p> <pre><code>SessionID   Protocol  Local       Remote             State        RecvQ+Buf  SendQ+Buf  LastRecv  LastSend\n3078661580  UDP       [::]:34453  12.34.123.45:5852  ESTABLISHED  0+0        0+0        0s (31)   0s (28)\n3408448183  UDP       [::]:34453  12.34.123.45:5852  ESTABLISHED  0+0        0+0        3s (22)   3s (21)\n</code></pre> <p>Similarly, you can run <code>mita get connections</code> command on the server to view the current connections between the server and all clients.</p>"},{"location":"operation/#check-connectivity-between-client-and-server","title":"Check connectivity between client and server","text":"<p>To determine if the connectivity is OK, you can look at the client metrics. To get the metrics, run command <code>mieru get metrics</code>. In the following example,</p> <pre><code>{\n    \"cipher - client\": {\n        \"DirectDecrypt\": 64540,\n        \"FailedDirectDecrypt\": 0\n    },\n    \"connections\": {\n        \"ActiveOpens\": 130,\n        \"CurrEstablished\": 2,\n        \"MaxConn\": 35,\n        \"PassiveOpens\": 0\n    },\n    \"HTTP proxy\": {\n        \"ConnErrors\": 2,\n        \"Requests\": 130,\n        \"SchemeErrors\": 0\n    },\n    \"replay\": {\n        \"KnownSession\": 0,\n        \"NewSession\": 0,\n        \"NewSessionDecrypted\": 0\n    },\n    \"socks5\": {\n        \"ConnectionRefusedErrors\": 0,\n        \"DNSResolveErrors\": 0,\n        \"HandshakeErrors\": 1,\n        \"HostUnreachableErrors\": 0,\n        \"NetworkUnreachableErrors\": 0,\n        \"UDPAssociateErrors\": 0,\n        \"UnsupportedCommandErrors\": 0\n    },\n    \"socks5 UDP associate\": {\n        \"DownloadBytes\": 0,\n        \"DownloadPackets\": 0,\n        \"UploadBytes\": 0,\n        \"UploadPackets\": 0\n    },\n    \"traffic\": {\n        \"DownloadBytes\": 257341785,\n        \"OutputPaddingBytes\": 511223,\n        \"UploadBytes\": 1254325\n    },\n    \"underlay\": {\n        \"ActiveOpens\": 16,\n        \"CurrEstablished\": 7,\n        \"MaxConn\": 11,\n        \"PassiveOpens\": 0,\n        \"UnderlayMalformedUDP\": 0,\n        \"UnsolicitedUDP\": 0\n    }\n}\n</code></pre> <p>if the value of <code>connections</code> -&gt; <code>CurrEstablished</code> is not 0, there is an active connection between the client and the server at this moment; if the value of <code>cipher - client</code> -&gt; <code>DirectDecrypt</code> is not 0, the client has successfully decrypted the response packets sent by the server.</p>"},{"location":"operation/#troubleshooting-suggestions","title":"Troubleshooting suggestions","text":"<p>mieru enhances server-side stealth in order to prevent GFW active probing, but it also makes debugging more difficult. If you cannot establish a connection between your client and server, it may be helpful to start with the following steps.</p> <ol> <li>Is the server working properly? Use the <code>ping</code> command to confirm whether the client can reach the server.</li> <li>Is the mita proxy service started? Use the <code>mita status</code> command to check.</li> <li>Is the mieru client started? Use the <code>mieru status</code> command to check.</li> <li>Are the port numbers of the client and server settings the same? Is the username the same? Is the password the same? Use <code>mieru describe config</code> and <code>mita describe config</code> to check.</li> <li>Open the debug logs for both the client and server to see exactly what is happening with your network connection.</li> </ol> <p>If you can't solve the problem, you can submit a GitHub issue to contact the developers.</p>"},{"location":"operation/#configuration-file-location","title":"Configuration file location","text":"<p>The configuration of the mita proxy server is stored in <code>/etc/mita/server.conf.pb</code>. This is a binary file in protocol buffer format. To protect user information, mita does not store the user's password in plain text, it only stores the checksum.</p> <p>The configuration file of the mieru client is also a binary file. It is stored in the following locations in different operating systems.</p> Operating System Configuration File Path Example Path Linux $HOME/.config/mieru/client.conf.pb /home/enfein/.config/mieru/client.conf.pb Mac OS $HOME/Library/Application Support/mieru/client.conf.pb /Users/enfein/Library/Application Support/mieru/client.conf.pb Windows %USERPROFILE%\\AppData\\Roaming\\mieru\\client.conf.pb C:\\Users\\enfein\\AppData\\Roaming\\mieru\\client.conf.pb"},{"location":"operation/#view-mita-proxy-server-log","title":"View mita proxy server log","text":"<p>The user can print the recent log of mita proxy server using the following command.</p> <pre><code>sudo journalctl -u mita -xe --no-pager\n</code></pre>"},{"location":"operation/#view-mieru-client-log","title":"View mieru client log","text":"<p>The location of the client mieru log files is shown in the following table.</p> Operating System Log Files Path Example Path Linux $HOME/.cache/mieru/ or $XDG_CACHE_HOME/mieru/ /home/enfein/.cache/mieru/ Mac OS $HOME/Library/Caches/mieru/ /Users/enfein/Library/Caches/mieru/ Windows %USERPROFILE%\\AppData\\Local\\mieru\\ C:\\Users\\enfein\\AppData\\Local\\mieru\\ <p>Each log file uses the format <code>yyyyMMdd_HHmm_PID.log</code>, where <code>yyyyMMdd_HHmm</code> is the time when the mieru process was started and <code>PID</code> is the process number. Each time mieru is restarted, a new log file is generated. When there are too many log files, the old ones will be deleted automatically.</p>"},{"location":"operation/#enable-and-disable-debug-logging","title":"Enable and disable debug logging","text":"<p>mieru / mita prints very little information at the default log level, which does not contain sensitive information such as IP addresses, port numbers, etc. If you need to diagnose a single network connection, you need to turn on the debug logging.</p> <p>The project provides configuration files for quickly enable and disable debug logs in the <code>configs/templates</code> directory. Please download them to your server or local computer and enter the following commands. Note that changing the settings of mieru requires restarting the service to take effect.</p> <pre><code># enable debug logging\nmita apply config server_enable_debug_logging.json\n\n# OR disable debug logging\nmita apply config server_disable_debug_logging.json\n\n# This will not interrupt traffic\nmita reload\n</code></pre> <pre><code># enable debug logging\nmieru apply config client_enable_debug_logging.json\n\n# OR disable debug logging\nmieru apply config client_disable_debug_logging.json\n\nmieru stop\n\nmieru start\n</code></pre> <p>All supported logging levels include <code>FATAL</code>, <code>ERROR</code>, <code>WARN</code>, <code>INFO</code>, <code>DEBUG</code> and <code>TRACE</code>.</p>"},{"location":"operation/#changing-the-metrics-logging-interval","title":"Changing the Metrics Logging Interval","text":"<p>By default, mieru / mita prints metrics information in the logs every 10 minutes. If you want to adjust this output interval, use the following settings:</p> <pre><code>{\n    \"advancedSettings\": {\n        \"metricsLoggingInterval\": \"1h30m\"\n    }\n}\n</code></pre> <p>You can specify the interval in:</p> <ul> <li>seconds <code>s</code></li> <li>minutes <code>m</code></li> <li>hours <code>h</code></li> </ul> <p>or any combination of these units.</p>"},{"location":"operation/#view-user-network-traffic","title":"View User Network Traffic","text":"<p>You can run the commands <code>mita get users</code> and <code>mita get quotas</code> on the server to check each user's most recent active time and the amount of network traffic used.</p> <pre><code>$ mita get users\nUser  LastActive            1DayDownload  1DayUpload  30DaysDownload  30DaysUpload\nabcd  2025-04-23T01:02:03Z  938.1MiB      12.9MiB     4.0GiB          31.8MiB\n\n$ mita get quotas\nUser  Days  Limit    Usage\nabcd  1     10.0GiB  951.1MiB\nabcd  7     40.0GiB  4.0GiB\n</code></pre>"},{"location":"operation/#environment-variables","title":"Environment Variables","text":"<p>If necessary, you can use environment variables to control the behavior of the server and the client.</p> <ul> <li><code>MITA_CONFIG_JSON_FILE</code> loads the JSON server configuration file from this path.</li> <li><code>MITA_CONFIG_FILE</code> loads the protocol buffer server configuration file from this path.</li> <li><code>MIERU_CONFIG_JSON_FILE</code> loads the JSON client configuration file from this path.</li> <li><code>MIERU_CONFIG_FILE</code> loads the protocol buffer client configuration file from this path.</li> <li>If <code>MITA_LOG_NO_TIMESTAMP</code> is not empty, the server log does not print timestamps. Since journald already provides timestamps, we enable this by default to avoid printing duplicate timestamps.</li> <li><code>MITA_UDS_PATH</code> creates the server UNIX domain socket file using this path. The default path is <code>/var/run/mita/mita.sock</code>.</li> <li>If <code>MITA_INSECURE_UDS</code> is not empty, do not enforce the user and access rights to the server UNIX domain socket file <code>/var/run/mita/mita.sock</code>. This setting can be used on systems that are very restricted (e.g., cannot create new users).</li> </ul>"},{"location":"operation/#running-client-in-the-foreground","title":"Running Client in the Foreground","text":"<p>In the following situations, users may want to run mieru client in the foreground:</p> <ul> <li>Running multiple mieru client processes simultaneously.</li> <li>Having mieru client start with the system.</li> <li>Quickly debugging mieru client configuration.</li> </ul> <p>On a Linux system, assuming the path to the mieru client configuration file is <code>/etc/mieru_client_config.json</code>, users can run the client in the foreground using the following command:</p> <pre><code>MIERU_CONFIG_JSON_FILE=/etc/mieru_client_config.json mieru run\n</code></pre> <p>At this point, the logs of the mieru client will be printed directly to the terminal. Press Ctrl+C to exit.</p>"},{"location":"operation/#disable-client-automatic-check-update","title":"Disable Client Automatic Check Update","text":"<p>When you start the mieru client, it will automatically check for updates every few days. If you want to turn off automatic check update, add the following client configuration:</p> <pre><code>{\n    \"advancedSettings\": {\n        \"noCheckUpdate\": true\n    }\n}\n</code></pre>"},{"location":"operation/#reset-server-metrics","title":"Reset Server Metrics","text":"<p>Server metrics are stored in the <code>/var/lib/mita/metrics.pb</code> file. Even if the server is restarted, you can read the accumulated metrics using the <code>mita get metrics</code>, <code>mita get users</code> and <code>mita get quotas</code> commands. If you want to reset the metrics, you can run the following command:</p> <pre><code>sudo systemctl stop mita &amp;&amp; sudo rm -f /var/lib/mita/metrics.pb &amp;&amp; sudo systemctl start mita\n</code></pre>"},{"location":"operation.zh_CN/","title":"\u8fd0\u8425\u7ef4\u62a4\u4e0e\u6545\u969c\u6392\u67e5","text":""},{"location":"operation.zh_CN/#_2","title":"\u67e5\u770b\u5f53\u524d\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u8fde\u63a5","text":"<p>\u53ef\u4ee5\u5728\u5ba2\u6237\u7aef\u8fd0\u884c <code>mieru get connections</code> \u6307\u4ee4\u67e5\u770b\u5f53\u524d\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u8fde\u63a5\u3002\u8be5\u6307\u4ee4\u8f93\u51fa\u7684\u4e00\u4e2a\u793a\u4f8b\u5982\u4e0b\u3002</p> <pre><code>SessionID   Protocol  Local       Remote             State        RecvQ+Buf  SendQ+Buf  LastRecv  LastSend\n3078661580  UDP       [::]:34453  12.34.123.45:5852  ESTABLISHED  0+0        0+0        0s (31)   0s (28)\n3408448183  UDP       [::]:34453  12.34.123.45:5852  ESTABLISHED  0+0        0+0        3s (22)   3s (21)\n</code></pre> <p>\u7c7b\u4f3c\u7684\uff0c\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u8fd0\u884c <code>mita get connections</code> \u6307\u4ee4\u67e5\u770b\u5f53\u524d\u670d\u52a1\u5668\u4e0e\u6240\u6709\u5ba2\u6237\u7aef\u4e4b\u95f4\u7684\u8fde\u63a5\u3002</p>"},{"location":"operation.zh_CN/#_3","title":"\u5224\u65ad\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u8fde\u63a5\u662f\u5426\u6b63\u5e38","text":"<p>\u8981\u786e\u5b9a\u8fde\u63a5\u662f\u5426\u6b63\u5e38\uff0c\u53ef\u4ee5\u67e5\u770b\u5ba2\u6237\u7aef\u6307\u6807\u3002\u8981\u83b7\u53d6\u6307\u6807\uff0c\u8bf7\u8fd0\u884c\u547d\u4ee4 <code>mieru get metrics</code>\u3002\u5728\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c</p> <pre><code>{\n    \"cipher - client\": {\n        \"DirectDecrypt\": 64540,\n        \"FailedDirectDecrypt\": 0\n    },\n    \"connections\": {\n        \"ActiveOpens\": 130,\n        \"CurrEstablished\": 2,\n        \"MaxConn\": 35,\n        \"PassiveOpens\": 0\n    },\n    \"HTTP proxy\": {\n        \"ConnErrors\": 2,\n        \"Requests\": 130,\n        \"SchemeErrors\": 0\n    },\n    \"replay\": {\n        \"KnownSession\": 0,\n        \"NewSession\": 0,\n        \"NewSessionDecrypted\": 0\n    },\n    \"socks5\": {\n        \"ConnectionRefusedErrors\": 0,\n        \"DNSResolveErrors\": 0,\n        \"HandshakeErrors\": 1,\n        \"HostUnreachableErrors\": 0,\n        \"NetworkUnreachableErrors\": 0,\n        \"UDPAssociateErrors\": 0,\n        \"UnsupportedCommandErrors\": 0\n    },\n    \"socks5 UDP associate\": {\n        \"DownloadBytes\": 0,\n        \"DownloadPackets\": 0,\n        \"UploadBytes\": 0,\n        \"UploadPackets\": 0\n    },\n    \"traffic\": {\n        \"DownloadBytes\": 257341785,\n        \"OutputPaddingBytes\": 511223,\n        \"UploadBytes\": 1254325\n    },\n    \"underlay\": {\n        \"ActiveOpens\": 16,\n        \"CurrEstablished\": 7,\n        \"MaxConn\": 11,\n        \"PassiveOpens\": 0,\n        \"UnderlayMalformedUDP\": 0,\n        \"UnsolicitedUDP\": 0\n    }\n}\n</code></pre> <p>\u5982\u679c <code>connections</code> -&gt; <code>CurrEstablished</code> \u7684\u503c\u4e0d\u4e3a 0\uff0c\u8bf4\u660e\u6b64\u523b\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\u6709\u6d3b\u8dc3\u7684\u8fde\u63a5\u3002\u5982\u679c <code>cipher - client</code> -&gt; <code>DirectDecrypt</code> \u7684\u503c\u4e0d\u4e3a 0\uff0c\u8bf4\u660e\u5ba2\u6237\u7aef\u66fe\u7ecf\u6210\u529f\u89e3\u5bc6\u4e86\u670d\u52a1\u5668\u8fd4\u56de\u7684\u6570\u636e\u5305\u3002</p>"},{"location":"operation.zh_CN/#_4","title":"\u6545\u969c\u8bca\u65ad\u4e0e\u6392\u67e5","text":"<p>mieru \u4e3a\u4e86\u9632\u6b62 GFW \u4e3b\u52a8\u63a2\u6d4b\uff0c\u589e\u5f3a\u4e86\u670d\u52a1\u5668\u7aef\u7684\u9690\u853d\u6027\uff0c\u4f46\u662f\u4e5f\u589e\u52a0\u4e86\u8c03\u8bd5\u7684\u96be\u5ea6\u3002\u5982\u679c\u4f60\u7684\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u65e0\u6cd5\u5efa\u7acb\u8fde\u63a5\uff0c\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u6392\u67e5\u65b9\u5411\u5165\u624b\u53ef\u80fd\u4f1a\u6709\u6240\u5e2e\u52a9\u3002</p> <ol> <li>\u670d\u52a1\u5668\u662f\u5426\u5728\u6b63\u5e38\u5de5\u4f5c\uff1f\u7528 <code>ping</code> \u6307\u4ee4\u786e\u8ba4\u5ba2\u6237\u7aef\u662f\u5426\u53ef\u4ee5\u5230\u8fbe\u670d\u52a1\u5668\u3002</li> <li>mita \u4ee3\u7406\u670d\u52a1\u662f\u5426\u5df2\u7ecf\u542f\u52a8\uff1f\u7528 <code>mita status</code> \u6307\u4ee4\u67e5\u770b\u3002</li> <li>mieru \u5ba2\u6237\u7aef\u662f\u5426\u5df2\u7ecf\u542f\u52a8\uff1f\u7528 <code>mieru status</code> \u6307\u4ee4\u67e5\u770b\u3002</li> <li>\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7684\u8bbe\u7f6e\u4e2d\uff0c\u7aef\u53e3\u53f7\u662f\u5426\u76f8\u540c\uff1f\u7528\u6237\u540d\u662f\u5426\u76f8\u540c\uff1f\u5bc6\u7801\u662f\u5426\u76f8\u540c\uff1f\u7528 <code>mieru describe config</code> \u548c <code>mita describe config</code> \u67e5\u770b\u3002</li> <li>\u6253\u5f00\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7684\u8c03\u8bd5\u65e5\u5fd7\uff0c\u67e5\u770b\u5177\u4f53\u7684\u7f51\u7edc\u8fde\u63a5\u60c5\u51b5\u3002</li> </ol> <p>\u5982\u679c\u672a\u80fd\u89e3\u51b3\u95ee\u9898\uff0c\u53ef\u4ee5\u63d0\u4ea4 GitHub Issue \u8054\u7cfb\u5f00\u53d1\u8005\u3002</p>"},{"location":"operation.zh_CN/#_5","title":"\u914d\u7f6e\u6587\u4ef6\u5b58\u653e\u5730\u5740","text":"<p>\u4ee3\u7406\u670d\u52a1\u5668\u8f6f\u4ef6 mita \u7684\u914d\u7f6e\u5b58\u653e\u5728 <code>/etc/mita/server.conf.pb</code>\u3002\u8fd9\u662f\u4e00\u4e2a\u4ee5 protocol buffer \u683c\u5f0f\u5b58\u50a8\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002\u4e3a\u4fdd\u62a4\u7528\u6237\u4fe1\u606f\uff0cmita \u4e0d\u4f1a\u5b58\u50a8\u7528\u6237\u5bc6\u7801\u7684\u660e\u6587\uff0c\u53ea\u4f1a\u5b58\u50a8\u5176\u6821\u9a8c\u7801\u3002</p> <p>\u5ba2\u6237\u7aef\u8f6f\u4ef6 mieru \u7684\u914d\u7f6e\u6587\u4ef6\u540c\u6837\u662f\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002\u5b83\u5728\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u5b58\u50a8\u7684\u4f4d\u7f6e\u5982\u4e0b\u8868\u6240\u793a</p> \u64cd\u4f5c\u7cfb\u7edf \u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e \u793a\u4f8b Linux $HOME/.config/mieru/client.conf.pb /home/enfein/.config/mieru/client.conf.pb Mac OS $HOME/Library/Application Support/mieru/client.conf.pb /Users/enfein/Library/Application Support/mieru/client.conf.pb Windows %USERPROFILE%\\AppData\\Roaming\\mieru\\client.conf.pb C:\\Users\\enfein\\AppData\\Roaming\\mieru\\client.conf.pb"},{"location":"operation.zh_CN/#mita","title":"\u67e5\u770b\u4ee3\u7406\u670d\u52a1\u5668 mita \u7684\u65e5\u5fd7","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u6307\u4ee4\u6253\u5370 mita \u7684\u8fd1\u671f\u65e5\u5fd7</p> <pre><code>sudo journalctl -u mita -xe --no-pager\n</code></pre>"},{"location":"operation.zh_CN/#mieru","title":"\u67e5\u770b\u5ba2\u6237\u7aef mieru \u7684\u65e5\u5fd7","text":"<p>\u5ba2\u6237\u7aef mieru \u7684\u65e5\u5fd7\u5b58\u653e\u4f4d\u7f6e\u5982\u4e0b\u8868\u6240\u793a</p> \u64cd\u4f5c\u7cfb\u7edf \u65e5\u5fd7\u6587\u4ef6\u4f4d\u7f6e \u793a\u4f8b Linux $HOME/.cache/mieru/ or $XDG_CACHE_HOME/mieru/ /home/enfein/.cache/mieru/ Mac OS $HOME/Library/Caches/mieru/ /Users/enfein/Library/Caches/mieru/ Windows %USERPROFILE%\\AppData\\Local\\mieru\\ C:\\Users\\enfein\\AppData\\Local\\mieru\\ <p>\u6bcf\u4e2a\u65e5\u5fd7\u6587\u4ef6\u7684\u683c\u5f0f\u4e3a <code>yyyyMMdd_HHmm_PID.log</code>\uff0c\u5176\u4e2d <code>yyyyMMdd_HHmm</code> \u662f mieru \u8fdb\u7a0b\u542f\u52a8\u7684\u65f6\u95f4\uff0c<code>PID</code> \u662f\u8fdb\u7a0b\u53f7\u7801\u3002\u6bcf\u6b21\u91cd\u542f mieru \u4f1a\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u65e5\u5fd7\u6587\u4ef6\u3002\u5f53\u65e5\u5fd7\u6587\u4ef6\u7684\u6570\u91cf\u592a\u591a\u65f6\uff0c\u65e7\u7684\u6587\u4ef6\u4f1a\u88ab\u81ea\u52a8\u5220\u9664\u3002</p>"},{"location":"operation.zh_CN/#_6","title":"\u6253\u5f00\u548c\u5173\u95ed\u8c03\u8bd5\u65e5\u5fd7","text":"<p>mieru / mita \u5728\u9ed8\u8ba4\u7684\u65e5\u5fd7\u7b49\u7ea7\u4e0b\uff0c\u6253\u5370\u7684\u4fe1\u606f\u975e\u5e38\u5c11\uff0c\u4e0d\u5305\u542b IP \u5730\u5740\u3001\u7aef\u53e3\u53f7\u7b49\u654f\u611f\u4fe1\u606f\u3002\u5982\u679c\u9700\u8981\u8bca\u65ad\u5355\u4e2a\u7f51\u7edc\u8fde\u63a5\uff0c\u5219\u9700\u8981\u6253\u5f00\u8c03\u8bd5\u65e5\u5fd7\uff08debug log\uff09\u3002</p> <p>\u672c\u9879\u76ee\u5728 <code>configs/templates</code> \u76ee\u5f55\u4e0b\u63d0\u4f9b\u4e86\u5feb\u901f\u6253\u5f00\u548c\u5173\u95ed\u8c03\u8bd5\u65e5\u5fd7\u7684\u914d\u7f6e\u6587\u4ef6\u3002\u8bf7\u5c06\u5b83\u4eec\u4e0b\u8f7d\u5230\u670d\u52a1\u5668\u6216\u672c\u5730\u8ba1\u7b97\u673a\u4e0a\uff0c\u5e76\u8f93\u5165\u4ee5\u4e0b\u6307\u4ee4\u3002\u6ce8\u610f\uff0c\u6539\u53d8 mieru \u7684\u8bbe\u7f6e\u540e\uff0c\u9700\u8981\u91cd\u65b0\u542f\u52a8\u670d\u52a1\u624d\u80fd\u751f\u6548\u3002</p> <pre><code># enable debug logging\nmita apply config server_enable_debug_logging.json\n\n# OR disable debug logging\nmita apply config server_disable_debug_logging.json\n\n# This will not interrupt traffic\nmita reload\n</code></pre> <pre><code># enable debug logging\nmieru apply config client_enable_debug_logging.json\n\n# OR disable debug logging\nmieru apply config client_disable_debug_logging.json\n\nmieru stop\n\nmieru start\n</code></pre> <p>\u6240\u6709\u652f\u6301\u7684\u65e5\u5fd7\u7b49\u7ea7\u5305\u62ec <code>FATAL</code>, <code>ERROR</code>, <code>WARN</code>, <code>INFO</code>, <code>DEBUG</code> \u548c <code>TRACE</code>\u3002</p>"},{"location":"operation.zh_CN/#_7","title":"\u4fee\u6539\u6307\u6807\u65e5\u5fd7\u8f93\u51fa\u95f4\u9694","text":"<p>mieru / mita \u6bcf\u9694 10 \u5206\u949f\u901a\u8fc7\u65e5\u5fd7\u6253\u5370\u6307\u6807\u4fe1\u606f\u3002\u5982\u679c\u60f3\u8981\u8c03\u6574\u8fd9\u4e2a\u8f93\u51fa\u7684\u95f4\u9694\uff0c\u8bf7\u4f7f\u7528\u4e0b\u9762\u7684\u8bbe\u7f6e\uff1a</p> <pre><code>{\n    \"advancedSettings\": {\n        \"metricsLoggingInterval\": \"1h30m\"\n    }\n}\n</code></pre> <p>\u5176\u4e2d\u53ef\u4ee5\u4f7f\u7528\u5355\u4f4d</p> <ul> <li>\u79d2 <code>s</code></li> <li>\u5206\u949f <code>m</code></li> <li>\u5c0f\u65f6 <code>h</code></li> </ul> <p>\u4ee5\u53ca\u4ed6\u4eec\u7684\u7ec4\u5408\u3002</p>"},{"location":"operation.zh_CN/#_8","title":"\u67e5\u770b\u7528\u6237\u7f51\u7edc\u6d41\u91cf","text":"<p>\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u8fd0\u884c <code>mita get users</code> \u548c <code>mita get quotas</code> \u6307\u4ee4\uff0c\u67e5\u770b\u6bcf\u4e2a\u7528\u6237\u6700\u8fd1\u7684\u6d3b\u8dc3\u65f6\u95f4\u548c\u6d88\u8017\u7684\u7f51\u7edc\u6d41\u91cf\u3002</p> <pre><code>$ mita get users\nUser  LastActive            1DayDownload  1DayUpload  30DaysDownload  30DaysUpload\nabcd  2025-04-23T01:02:03Z  938.1MiB      12.9MiB     4.0GiB          31.8MiB\n\n$ mita get quotas\nUser  Days  Limit    Usage\nabcd  1     10.0GiB  951.1MiB\nabcd  7     40.0GiB  4.0GiB\n</code></pre>"},{"location":"operation.zh_CN/#_9","title":"\u73af\u5883\u53d8\u91cf","text":"<p>\u5982\u6709\u5fc5\u8981\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u73af\u5883\u53d8\u91cf\u63a7\u5236\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u7684\u884c\u4e3a\u3002</p> <ul> <li><code>MITA_CONFIG_JSON_FILE</code> \u4ece\u8fd9\u4e2a\u8def\u5f84\u52a0\u8f7d JSON \u683c\u5f0f\u7684\u670d\u52a1\u5668\u914d\u7f6e\u6587\u4ef6\u3002</li> <li><code>MITA_CONFIG_FILE</code> \u4ece\u8fd9\u4e2a\u8def\u5f84\u52a0\u8f7d protocol buffer \u683c\u5f0f\u7684\u670d\u52a1\u5668\u914d\u7f6e\u6587\u4ef6\u3002</li> <li><code>MIERU_CONFIG_JSON_FILE</code> \u4ece\u8fd9\u4e2a\u8def\u5f84\u52a0\u8f7d JSON \u683c\u5f0f\u7684\u5ba2\u6237\u7aef\u914d\u7f6e\u6587\u4ef6\u3002</li> <li><code>MIERU_CONFIG_FILE</code> \u4ece\u8fd9\u4e2a\u8def\u5f84\u52a0\u8f7d protocol buffer \u683c\u5f0f\u7684\u5ba2\u6237\u7aef\u914d\u7f6e\u6587\u4ef6\u3002</li> <li><code>MITA_LOG_NO_TIMESTAMP</code> \u8fd9\u4e2a\u503c\u975e\u7a7a\u65f6\uff0c\u670d\u52a1\u5668\u65e5\u5fd7\u4e0d\u6253\u5370\u65f6\u95f4\u6233\u3002\u56e0\u4e3a journald \u5df2\u7ecf\u63d0\u4f9b\u4e86\u65f6\u95f4\u6233\uff0c\u6211\u4eec\u9ed8\u8ba4\u5f00\u542f\u8fd9\u9879\u8bbe\u7f6e\uff0c\u4ee5\u907f\u514d\u6253\u5370\u91cd\u590d\u7684\u65f6\u95f4\u6233\u3002</li> <li><code>MITA_UDS_PATH</code> \u4f7f\u7528\u8fd9\u4e2a\u8def\u5f84\u521b\u5efa\u670d\u52a1\u5668 UNIX domain socket \u6587\u4ef6\u3002\u9ed8\u8ba4\u7684\u8def\u5f84\u662f <code>/var/run/mita/mita.sock</code>\u3002</li> <li><code>MITA_INSECURE_UDS</code> \u8fd9\u4e2a\u503c\u975e\u7a7a\u65f6\uff0c\u4e0d\u5f3a\u5236\u4fee\u6539\u670d\u52a1\u5668 UNIX domain socket \u6587\u4ef6 <code>/var/run/mita/mita.sock</code> \u7684\u7528\u6237\u548c\u8bbf\u95ee\u6743\u9650\u3002\u8fd9\u4e2a\u8bbe\u7f6e\u53ef\u4ee5\u7528\u4e8e\u67d0\u4e9b\u975e\u5e38\u53d7\u9650\uff08\u4f8b\u5982\u4e0d\u80fd\u521b\u5efa\u65b0\u7528\u6237\uff09\u7684\u7cfb\u7edf\u4e2d\u3002</li> </ul>"},{"location":"operation.zh_CN/#_10","title":"\u5728\u524d\u53f0\u8fd0\u884c\u5ba2\u6237\u7aef","text":"<p>\u5728\u4e0b\u9762\u51e0\u79cd\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u53ef\u80fd\u5e0c\u671b\u5728\u524d\u53f0\u8fd0\u884c mieru \u5ba2\u6237\u7aef\uff1a</p> <ul> <li>\u540c\u65f6\u8fd0\u884c\u591a\u4e2a mieru \u5ba2\u6237\u7aef\u8fdb\u7a0b\u3002</li> <li>\u8ba9 mieru \u5ba2\u6237\u7aef\u968f\u7cfb\u7edf\u4e00\u540c\u542f\u52a8\u3002</li> <li>\u5feb\u901f\u8c03\u8bd5 mieru \u5ba2\u6237\u7aef\u914d\u7f6e\u3002</li> </ul> <p>\u5728 Linux \u7cfb\u7edf\u4e0b\uff0c\u5047\u8bbe mieru \u5ba2\u6237\u7aef\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u662f <code>/etc/mieru_client_config.json</code>\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u6307\u4ee4\u5728\u524d\u53f0\u8fd0\u884c\u5ba2\u6237\u7aef\uff1a</p> <pre><code>MIERU_CONFIG_JSON_FILE=/etc/mieru_client_config.json mieru run\n</code></pre> <p>\u6b64\u65f6\uff0cmieru \u5ba2\u6237\u7aef\u7684\u65e5\u5fd7\u4f1a\u76f4\u63a5\u6253\u5370\u81f3\u7ec8\u7aef\u3002\u6309\u4e0b Ctrl+C \u9000\u51fa\u3002</p>"},{"location":"operation.zh_CN/#_11","title":"\u5173\u95ed\u5ba2\u6237\u7aef\u81ea\u52a8\u68c0\u67e5\u66f4\u65b0","text":"<p>\u542f\u52a8 mieru \u5ba2\u6237\u7aef\u65f6\uff0c\u6bcf\u9694\u51e0\u5929\uff0c\u4f1a\u81ea\u52a8\u68c0\u67e5\u66f4\u65b0\u3002\u5982\u679c\u60f3\u5173\u95ed\u81ea\u52a8\u68c0\u67e5\u66f4\u65b0\uff0c\u8bf7\u6dfb\u52a0\u5982\u4e0b\u7684\u5ba2\u6237\u7aef\u914d\u7f6e\uff1a</p> <pre><code>{\n    \"advancedSettings\": {\n        \"noCheckUpdate\": true\n    }\n}\n</code></pre>"},{"location":"operation.zh_CN/#_12","title":"\u91cd\u7f6e\u670d\u52a1\u5668\u6307\u6807","text":"<p>\u670d\u52a1\u5668\u6307\u6807\u5b58\u50a8\u5728\u6587\u4ef6 <code>/var/lib/mita/metrics.pb</code> \u4e2d\u3002\u5373\u4fbf\u670d\u52a1\u5668\u91cd\u542f\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 <code>mita get metrics</code>\uff0c<code>mita get users</code> \u548c <code>mita get quotas</code> \u6307\u4ee4\u8bfb\u53d6\u7d2f\u79ef\u7684\u6307\u6807\u3002\u5982\u679c\u60f3\u91cd\u7f6e\u6307\u6807\uff0c\u53ef\u4ee5\u8fd0\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff1a</p> <pre><code>sudo systemctl stop mita &amp;&amp; sudo rm -f /var/lib/mita/metrics.pb &amp;&amp; sudo systemctl start mita\n</code></pre>"},{"location":"protocol/","title":"mieru Proxy Protocol","text":"<p>To meet the needs of different scenarios, mieru provides two different protocols: TCP and UDP. Because UDP protocol requires more decryption attempts, TCP protocol is faster. In most cases, we recommend using TCP protocol.</p> <p>The following is a detailed explanation of the mieru proxy protocol. Unless otherwise specified, all data is stored in big endian format.</p>"},{"location":"protocol/#key-generation-method","title":"Key Generation Method","text":"<p>TCP and UDP protocols share the same key generation method.</p> <p>Each mieru user needs to provide a username <code>username</code> and a password <code>password</code>. To generate the key for encryption and decryption from the username and password, the following steps are executed.</p> <p>The first step is to generate a hashed password <code>hashedPassword</code>, whose value is equal to <code>password</code> appended with a <code>0x00</code> byte and appended with <code>username</code>, then takes the SHA-256 checksum.</p> <p>The second step is to get the current time of the system <code>unixTime</code>, whose value is equal to the number of seconds elapsed between January 1, 1970 and now. Round the time of <code>unixTime</code> to the nearest 2 minutes, and store it as an 8-byte string from uint64. Get the SHA-256 checksum of the string as <code>timeSalt</code>.</p> <p>In the third step, the key is generated using the pbkdf2 algorithm. In this case, <code>hashedPassword</code> is used as the password, <code>timeSalt</code> is used as the salt, the number of iterations is 64, the length of the key is 32 bytes, and the hash algorithm is SHA-256.</p> <p>Since the key depends on the system time, the time difference between the client and the server must not be larger than 4 minutes. The server needs to try maximum 3 different <code>timeSalt</code> to decrypt it successfully.</p> <p>The mieru protocol allows the use of any AEAD algorithm for encryption. The current version of mieru only implements the XChaCha20-Poly1305 algorithm.</p>"},{"location":"protocol/#segment-format","title":"Segment Format","text":"<p>When mieru receives a network access request from a user, it divides the original data stream into small fragments and sends them to the Internet after encryption and encapsulation. The fields and their lengths in each segment are as shown in the following table:</p> padding 0 nonce encrypted metadata auth tag of encrypted metadata padding 1 encrypted payload auth tag of encrypted payload padding 2 ? 0 or 12 or 24 32 16 ? size of original fragment 16 ? <p>Among these, <code>encrypted metadata</code> and <code>auth tag of encrypted metadata</code> will appear in every segment, while the other fields are not mandatory. <code>padding 0</code>, <code>padding 1</code>, and <code>padding 2</code> are randomly generated non-encrypted content used by mieru to adjust the information entropy of the segment, and the length of consecutive printable characters, among other factors.</p>"},{"location":"protocol/#tcp-segment-rules","title":"TCP Segment Rules","text":"<p>When using TCP protocol, the nonce will only appear once in the first segment of each direction of the TCP connection (from the client to the server and from the server to the client). For each segment transmitted, one or two encryption operations will be performed to obtain encrypted metadata and, if present, encrypted raw data payload. With each encryption operation, the nonce value will increase by 1, and the modified nonce will be used in the calculation for the next set of encryption.</p> <p>When splitting the original data into fragments, the maximum length for an individual fragment is 32768 bytes.</p>"},{"location":"protocol/#udp-segment-rules","title":"UDP Segment Rules","text":"<p>When using UDP protocol, each segment will include a nonce used to decrypt the current segment.</p> <p>The encrypted segment must fit into a single UDP packet. The size of the segment during transmission cannot exceed the Maximum Transmission Unit (MTU) value of the current network. The network's MTU value determines the maximum length for an individual fragment when splitting the original data into fragments.</p>"},{"location":"protocol/#metadata-format","title":"Metadata Format","text":"<p>Each segment must contain metadata, and the length of the metadata is fixed at 32 bytes. The current version of mieru defines two types of metadata as follows.</p>"},{"location":"protocol/#session-metadata","title":"Session Metadata","text":"<p>The fields and their lengths in the session metadata are as shown in the following table:</p> protocol type unused timestamp session ID sequence number status code payload length suffix length unused 1 1 4 4 4 1 2 1 14 <p>The session metadata is used for the following four <code>protocol type</code>:</p> <ul> <li><code>openSessionRequest</code> = 2</li> <li><code>openSessionResponse</code> = 3</li> <li><code>closeSessionRequest</code> = 4</li> <li><code>closeSessionResponse</code> = 5</li> </ul> <p>The value of timestamp is set to the number of minutes elapsed since January 1, 1970.</p> <p>If a segment selects session metadata, the segment can be used to transmit a maximum of 1024 bytes of raw payload data. The length of this payload is recorded in <code>payload length</code>.</p> <p>The <code>suffix length</code> determines the length of <code>padding 2</code>.</p>"},{"location":"protocol/#data-metadata","title":"Data Metadata","text":"<p>The fields and their lengths in the data metadata are as shown in the following table:</p> protocol type unused timestamp session ID sequence number unack sequence number window size fragment number prefix length payload length suffix length unused 1 1 4 4 4 4 2 1 1 2 1 7 <p>The data metadata is used for the following four <code>protocol type</code>:</p> <ul> <li><code>dataClientToServer</code> = 6</li> <li><code>dataServerToClient</code> = 7</li> <li><code>ackClientToServer</code> = 8</li> <li><code>ackServerToClient</code> = 9</li> </ul> <p>The definitions and usage of <code>timestamp</code>, <code>session ID</code>, and <code>sequence number</code> are the same as in session metadata.</p> <p><code>sequence number</code>, <code>unack sequence number</code>, and <code>window size</code> are used for flow control.</p> <p><code>prefix length</code> determines the length of <code>padding 1</code>, while <code>suffix length</code> determines the length of <code>padding 2</code>.</p>"},{"location":"protocol/#udp-associate-encapsulation","title":"UDP Associate Encapsulation","text":"<p>mieru supports transmission of socks5 UDP associate requests using TCP and UDP proxy protocols. In order to preserve the boundaries of socks5 UDP packets, mieru encapsulates the raw UDP associate packets as follows:</p> marker 1 data length data marker 2 1 2 X 1 <p>The value of <code>marker 1</code> is constant <code>0x00</code>, the value of <code>data length</code> is <code>X</code>, and the value of <code>marker 2</code> is constant <code>0xff</code>. The encapsulated result is passed to TCP and UDP proxy protocols as the raw data for encryption and transmission.</p>"},{"location":"protocol.zh_CN/","title":"mieru \u4ee3\u7406\u534f\u8bae","text":"<p>\u4e3a\u4e86\u6ee1\u8db3\u4e0d\u540c\u573a\u666f\u7684\u9700\u8981\uff0cmieru \u63d0\u4f9b\u4e86 TCP \u548c UDP \u4e24\u79cd\u4e0d\u540c\u7684\u4ee3\u7406\u534f\u8bae\u3002\u7531\u4e8e UDP \u534f\u8bae\u9700\u8981\u5c1d\u8bd5\u66f4\u591a\u6b21\u6570\u7684\u89e3\u5bc6\uff0cTCP \u534f\u8bae\u6bd4 UDP \u534f\u8bae\u66f4\u5feb\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u63a8\u8350\u4f7f\u7528 TCP \u534f\u8bae\u3002</p> <p>\u4e0b\u9762\u662f mieru \u4ee3\u7406\u534f\u8bae\u7684\u5177\u4f53\u8bb2\u89e3\u3002\u5982\u679c\u6ca1\u6709\u7279\u6b8a\u8bf4\u660e\uff0c\u6240\u6709\u6570\u636e\u4ee5 big endian \u7684\u65b9\u5f0f\u5b58\u50a8\u3002</p>"},{"location":"protocol.zh_CN/#_1","title":"\u5bc6\u94a5\u751f\u6210\u65b9\u6cd5","text":"<p>TCP \u548c UDP \u534f\u8bae\u5171\u7528\u540c\u4e00\u5957\u5bc6\u94a5\u751f\u6210\u65b9\u6cd5\u3002</p> <p>\u6bcf\u4e00\u4e2a mieru \u7528\u6237\u90fd\u9700\u8981\u63d0\u4f9b\u7528\u6237\u540d <code>username</code> \u548c\u5bc6\u7801 <code>password</code>\u3002\u4ece\u7528\u6237\u540d\u548c\u5bc6\u7801\u751f\u6210\u52a0\u5bc6\u548c\u89e3\u5bc6\u4f7f\u7528\u7684\u5bc6\u94a5\uff0c\u9700\u8981\u7ecf\u5386\u5982\u4e0b\u51e0\u6b65\u3002</p> <p>\u7b2c\u4e00\u6b65\uff0c\u751f\u6210\u4e00\u4e2a\u54c8\u5e0c\u5bc6\u7801 <code>hashedPassword</code>\uff0c\u5176\u503c\u7b49\u4e8e <code>password</code> \u9644\u52a0\u4e00\u4e2a <code>0x00</code> \u5b57\u8282\u518d\u9644\u52a0 <code>username</code> \u5f97\u5230\u7684\u5b57\u7b26\u4e32\u7684 SHA-256 \u6821\u9a8c\u7801\u3002</p> <p>\u7b2c\u4e8c\u6b65\uff0c\u83b7\u53d6\u7cfb\u7edf\u5f53\u524d\u7684\u65f6\u95f4 <code>unixTime</code>\uff0c\u5176\u503c\u7b49\u4e8e 1970 \u5e74 1 \u6708 1 \u65e5\u5230\u73b0\u5728\u7ecf\u5386\u7684\u79d2\u6570\u3002\u5c06 <code>unixTime</code> \u7684\u65f6\u523b\u56db\u820d\u4e94\u5165\u5230\u6700\u63a5\u8fd1\u7684 2 \u5206\u949f\uff0c\u4ee5 uint64 \u5b58\u50a8\u4e3a\u4e00\u4e2a 8 \u5b57\u8282\u7684\u5b57\u7b26\u4e32\uff0c\u53d6\u5f97\u8be5\u5b57\u7b26\u4e32\u7684 SHA-256 \u6821\u9a8c\u7801\uff0c\u8bb0\u4e3a <code>timeSalt</code>\u3002</p> <p>\u7b2c\u4e09\u6b65\uff0c\u4f7f\u7528 pbkdf2 \u7b97\u6cd5\u751f\u6210\u5bc6\u94a5\u3002\u5176\u4e2d\uff0c\u4f7f\u7528 <code>hashedPassword</code> \u4f5c\u4e3a\u5bc6\u7801\uff0c\u4f7f\u7528 <code>timeSalt</code> \u4f5c\u4e3a\u76d0\uff0c\u8fed\u4ee3\u6b21\u6570\u4e3a 64\uff0c\u5bc6\u94a5\u957f\u5ea6\u4e3a 32 \u5b57\u8282\uff0c\u54c8\u5e0c\u7b97\u6cd5\u4e3a SHA-256\u3002</p> <p>\u7531\u4e8e\u5bc6\u94a5\u4f9d\u8d56\u4e8e\u7cfb\u7edf\u65f6\u95f4\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u65f6\u95f4\u5dee\u4e0d\u80fd\u8d85\u8fc7 4 \u5206\u949f\u3002\u670d\u52a1\u5668\u6700\u591a\u9700\u8981\u5c1d\u8bd5 3 \u7ec4\u4e0d\u540c\u7684\u65f6\u523b\u624d\u80fd\u987a\u5229\u89e3\u5bc6\u3002</p> <p>mieru \u534f\u8bae\u5141\u8bb8\u4f7f\u7528\u4efb\u4f55 AEAD \u7b97\u6cd5\u8fdb\u884c\u52a0\u5bc6\u3002\u5f53\u524d mieru \u7248\u672c\u53ea\u5b9e\u73b0\u4e86 XChaCha20-Poly1305 \u7b97\u6cd5\u3002</p>"},{"location":"protocol.zh_CN/#_2","title":"\u6570\u636e\u6bb5\u7684\u683c\u5f0f","text":"<p>mieru \u6536\u5230\u7528\u6237\u7684\u7f51\u7edc\u8bbf\u95ee\u8bf7\u6c42\u540e\uff0c\u4f1a\u5c06\u539f\u59cb\u6570\u636e\u6d41\u91cf\u5207\u5206\u6210\u5c0f\u6bb5\uff08fragment\uff09\uff0c\u7ecf\u8fc7\u52a0\u5bc6\u5c01\u88c5\u53d1\u9001\u5230\u4e92\u8054\u7f51\u4e0a\u3002\u6bcf\u4e2a\u6570\u636e\u6bb5\uff08segment\uff09\u4e2d\u7684\u6570\u636e\u9879\uff08field\uff09\u53ca\u5176\u957f\u5ea6\u5982\u4e0b\u8868\u6240\u793a\u3002</p> padding 0 nonce encrypted metadata auth tag of encrypted metadata padding 1 encrypted payload auth tag of encrypted payload padding 2 ? 0 or 12 or 24 32 16 ? size of original fragment 16 ? <p>\u8fd9\u5176\u4e2d\uff0c<code>encrypted metadata</code> \u548c <code>auth tag of encrypted metadata</code> \u4f1a\u51fa\u73b0\u5728\u6bcf\u4e00\u4e2a\u6570\u636e\u6bb5\u4e2d\uff0c\u5176\u5b83\u7684\u6570\u636e\u9879\u5219\u4e0d\u662f\u5fc5\u987b\u7684\u3002<code>padding 0</code>, <code>padding 1</code> \u548c <code>padding 2</code> \u662f\u968f\u673a\u751f\u6210\u7684\u975e\u52a0\u5bc6\u5185\u5bb9\uff0cmieru \u4f7f\u7528\u8fd9\u4e9b\u586b\u5145\u6570\u636e\u8c03\u8282\u6570\u636e\u6bb5\u7684\u4fe1\u606f\u71b5\uff0c\u4ee5\u53ca\u8fde\u7eed\u53ef\u6253\u5370\u5b57\u7b26\u7684\u957f\u5ea6\u7b49\u4fe1\u606f\u3002</p>"},{"location":"protocol.zh_CN/#tcp","title":"TCP \u6570\u636e\u6bb5\u7684\u89c4\u5219","text":"<p>\u4f7f\u7528 TCP \u534f\u8bae\u65f6\uff0cnonce \u5728 TCP \u8fde\u63a5\u7684\u6bcf\u4e2a\u65b9\u5411\uff08\u5ba2\u6237\u7aef\u5230\u670d\u52a1\u5668\u3001\u670d\u52a1\u5668\u5230\u5ba2\u6237\u7aef\uff09\u53ea\u4f1a\u5728\u7b2c\u4e00\u4e2a\u6570\u636e\u6bb5\u51fa\u73b0\u4e00\u6b21\u3002\u6bcf\u4f20\u8f93\u4e00\u4e2a\u6570\u636e\u6bb5\uff0c\u4f1a\u8fdb\u884c\u4e00\u6b21\u6216\u8005\u4e24\u6b21\u52a0\u5bc6\u64cd\u4f5c\uff0c\u5f97\u5230\u52a0\u5bc6\u7684\u5143\u6570\u636e\uff0c\u4ee5\u53ca\uff08\u5982\u679c\u6709\uff09\u52a0\u5bc6\u7684\u539f\u59cb\u6570\u636e\u8f7d\u8377\u3002\u6bcf\u8fdb\u884c\u4e00\u6b21\u52a0\u5bc6\uff0cnonce \u7684\u503c\u4f1a\u589e\u52a0 1\uff0c\u53d8\u66f4\u540e\u7684 nonce \u5c06\u4f1a\u53c2\u4e0e\u4e0b\u4e00\u7ec4\u52a0\u5bc6\u7684\u8ba1\u7b97\u3002</p> <p>\u628a\u539f\u59cb\u6570\u636e\u5207\u5206\u6210\u5c0f\u6bb5\u65f6\uff0c\u5355\u4e2a\u5c0f\u6bb5\u7684\u6700\u5927\u957f\u5ea6\u662f 32768 \u5b57\u8282\u3002</p>"},{"location":"protocol.zh_CN/#udp","title":"UDP \u6570\u636e\u6bb5\u7684\u89c4\u5219","text":"<p>\u4f7f\u7528 UDP \u534f\u8bae\u65f6\uff0c\u6bcf\u4e00\u4e2a\u6570\u636e\u6bb5\u90fd\u4f1a\u5305\u542b nonce\uff0c\u7528\u6765\u89e3\u5bc6\u5f53\u524d\u7684\u6570\u636e\u6bb5\u3002</p> <p>\u52a0\u5bc6\u540e\u7684\u6570\u636e\u6bb5\u5fc5\u987b\u80fd\u88c5\u5165\u5355\u4e2a UDP \u6570\u636e\u5305\u4e2d\u3002\u6570\u636e\u6bb5\u5728\u4f20\u8f93\u65f6\u7684\u5927\u5c0f\uff0c\u4e0d\u80fd\u8d85\u8fc7\u5f53\u524d\u7f51\u7edc\u7684 MTU \u503c\u3002\u7f51\u7edc\u7684 MTU \u503c\u4f1a\u51b3\u5b9a\u628a\u539f\u59cb\u6570\u636e\u5207\u5206\u6210\u5c0f\u6bb5\u65f6\uff0c\u5355\u4e2a\u5c0f\u6bb5\u7684\u6700\u5927\u957f\u5ea6\u3002</p>"},{"location":"protocol.zh_CN/#_3","title":"\u5143\u6570\u636e\u7684\u683c\u5f0f","text":"<p>\u6bcf\u4e2a\u6570\u636e\u6bb5\u5fc5\u5b9a\u5305\u542b\u4e00\u4e2a\u5143\u6570\u636e\u3002\u5143\u6570\u636e\u7684\u957f\u5ea6\u56fa\u5b9a\u4e3a 32 \u5b57\u8282\u3002\u5f53\u524d mieru \u7248\u672c\u5b9a\u4e49\u7684\u5143\u6570\u636e\u7c7b\u578b\u5305\u542b\u4e0b\u9762\u4e24\u79cd\u3002</p>"},{"location":"protocol.zh_CN/#_4","title":"\u4f1a\u8bdd\u5143\u6570\u636e","text":"<p>\u4f1a\u8bdd\u5143\u6570\u636e\uff08session metadata\uff09\u4e2d\u7684\u6570\u636e\u9879\u53ca\u5176\u957f\u5ea6\u5982\u4e0b\u8868\u6240\u793a\u3002</p> protocol type unused timestamp session ID sequence number status code payload length suffix length unused 1 1 4 4 4 1 2 1 14 <p>\u4f1a\u8bdd\u5143\u6570\u636e\u7528\u4e8e\u4e0b\u9762\u56db\u79cd <code>protocol type</code>:</p> <ul> <li><code>openSessionRequest</code> = 2</li> <li><code>openSessionResponse</code> = 3</li> <li><code>closeSessionRequest</code> = 4</li> <li><code>closeSessionResponse</code> = 5</li> </ul> <p><code>timestamp</code> \u7684\u503c\u8bbe\u5b9a\u4e3a 1970 \u5e74 1 \u6708 1 \u65e5\u5230\u73b0\u5728\u7ecf\u5386\u7684\u5206\u949f\u6570\u3002</p> <p>\u5982\u679c\u4e00\u4e2a\u6570\u636e\u6bb5\u91c7\u7528\u4e86\u4f1a\u8bdd\u5143\u6570\u636e\uff0c\u8be5\u6570\u636e\u6bb5\u53ef\u4ee5\u7528\u6765\u4f20\u8f93\u6700\u591a 1024 \u5b57\u8282\u7684\u539f\u59cb\u6570\u636e\u8f7d\u8377\u3002\u8fd9\u4e2a\u8f7d\u8377\u7684\u957f\u5ea6\u8bb0\u5f55\u5728 <code>payload length</code> \u4e2d\u3002</p> <p><code>suffix length</code> \u51b3\u5b9a\u4e86 <code>padding 2</code> \u7684\u957f\u5ea6\u3002</p>"},{"location":"protocol.zh_CN/#_5","title":"\u6570\u636e\u5143\u6570\u636e","text":"<p>\u6570\u636e\u5143\u6570\u636e\uff08data metadata\uff09\u4e2d\u7684\u6570\u636e\u9879\u53ca\u5176\u957f\u5ea6\u5982\u4e0b\u8868\u6240\u793a\u3002</p> protocol type unused timestamp session ID sequence number unack sequence number window size fragment number prefix length payload length suffix length unused 1 1 4 4 4 4 2 1 1 2 1 7 <p>\u6570\u636e\u5143\u6570\u636e\u7528\u4e8e\u4e0b\u9762\u56db\u79cd <code>protocol type</code>:</p> <ul> <li><code>dataClientToServer</code> = 6</li> <li><code>dataServerToClient</code> = 7</li> <li><code>ackClientToServer</code> = 8</li> <li><code>ackServerToClient</code> = 9</li> </ul> <p><code>timestamp</code>, <code>session ID</code> \u548c <code>sequence number</code> \u7684\u5b9a\u4e49\u548c\u7528\u6cd5\uff0c\u4e0e\u4f1a\u8bdd\u5143\u6570\u636e\u76f8\u540c\u3002</p> <p><code>sequence number</code>, <code>unack sequence number</code> \u4ee5\u53ca <code>window size</code> \u7528\u4e8e\u6d41\u91cf\u63a7\u5236\u3002</p> <p><code>prefix length</code> \u51b3\u5b9a\u4e86 <code>padding 1</code> \u7684\u957f\u5ea6\uff0c\u800c <code>suffix length</code> \u51b3\u5b9a\u4e86 <code>padding 2</code> \u7684\u957f\u5ea6\u3002</p>"},{"location":"protocol.zh_CN/#udp-associate","title":"UDP Associate \u7684\u5c01\u88c5","text":"<p>mieru \u652f\u6301\u4f7f\u7528 TCP \u548c UDP \u4ee3\u7406\u534f\u8bae\u4f20\u8f93 socks5 UDP associate \u8bf7\u6c42\u3002\u4e3a\u4e86\u4fdd\u7559 socks5 UDP \u6570\u636e\u5305\u7684\u8fb9\u754c\uff0cmieru \u4f1a\u5bf9\u539f\u59cb UDP associate \u6570\u636e\u5305\u8fdb\u884c\u5982\u4e0b\u7684\u5c01\u88c5\uff1a</p> marker 1 data length data marker 2 1 2 X 1 <p>\u5176\u4e2d <code>marker 1</code> \u7684\u503c\u6052\u5b9a\u4e3a <code>0x00</code>\uff0c<code>data length</code> \u7684\u503c\u4e3a <code>X</code>\uff0c<code>marker 2</code> \u7684\u503c\u6052\u5b9a\u4e3a <code>0xff</code>\u3002\u5c01\u88c5\u540e\u7684\u7ed3\u679c\u5c06\u4f5c\u4e3a\u539f\u59cb\u6570\u636e\u4ea4\u7ed9 TCP \u548c UDP \u4ee3\u7406\u534f\u8bae\u8fdb\u884c\u52a0\u5bc6\u548c\u4f20\u8f93\u3002</p>"},{"location":"security/","title":"Security Guide","text":"<p>This article focuses on how to safely use mieru. Some content may be specific to China.</p>"},{"location":"security/#do-not-use-domestic-operating-systems-and-domestic-browsers","title":"Do NOT use domestic operating systems and domestic browsers","text":"<p>Some domestic browsers, such as 360 Safe Browser and QQ Browser, record and upload the use of browser plugins and web proxies. Using a domestic operating system and a domestic browser notifies the police directly.</p>"},{"location":"security/#separate-domestic-traffic-from-international-traffic","title":"Separate domestic traffic from international traffic","text":"<p>Users should not use proxies to access domestic websites. This practice can reduce performance and help GFW discover and block the proxy server. For example, if bilibili or GFW finds that a lot of video playback requests originate from a cloud service provider's IP, that IP may be judged to be used by proxy and be blocked.</p> <p>mieru does not provide the ability to determine if traffic should be proxied based on rules or IP address locations. Users should use a browser plugin that can be configured for this purpose, such as Proxy SwitchyOmega, or use two different browsers, one dedicated to accessing domestic websites and the other dedicated to international traffic.</p>"},{"location":"security/#use-a-virtual-machine-or-a-separate-computer","title":"Use a virtual machine or a separate computer","text":"<p>Another type of attack occurs on the user's computer. Some heavily installed software, such as QQ, scans processes and files on the computer. If they find users running well-known proxy softwares such as shadowsocks, they will record and report these actions.</p> <p>Considering that it is difficult for domestic users to not use domestic software at all, we recommend creating a virtual machine, or using a separate computer.</p>"},{"location":"security/#use-tor-browser","title":"Use Tor browser","text":"<p>Anti-censorship software developers, investigative journalists, human rights lawyers, and people who engage in political discussions on foreign websites are all high-risk users. In addition to the above suggestions, please make sure to use Tor for sensitive operations. You cannot connect directly to the Tor bridge in China, but mieru can be used as a Tor proxy. To use a proxy in the Tor browser, please follow the pictures below. Make sure to use the port number that mieru is listening to on your computer.</p> <p></p> <p></p> <p>When using Tor, the internet speed is slow, and you may not be able to watch videos smoothly.</p>"},{"location":"security.zh_CN/","title":"\u7ffb\u5899\u5b89\u5168\u6307\u5357","text":"<p>\u8fd9\u7bc7\u6587\u7ae0\u4e3b\u8981\u8bb2\u89e3\u5982\u4f55\u5b89\u5168\u7684\u4f7f\u7528 mieru \u8fdb\u884c\u7ffb\u5899\u3002</p>"},{"location":"security.zh_CN/#_2","title":"\u4e0d\u4f7f\u7528\u56fd\u4ea7\u64cd\u4f5c\u7cfb\u7edf\u548c\u56fd\u4ea7\u6d4f\u89c8\u5668","text":"<p>\u56fd\u4ea7\u6d4f\u89c8\u5668\uff0c\u4f8b\u5982 360 \u5b89\u5168\u6d4f\u89c8\u5668\u3001QQ \u6d4f\u89c8\u5668\u7b49\uff0c\u4f1a\u8bb0\u5f55\u548c\u4e0a\u4f20\u6d4f\u89c8\u5668\u63d2\u4ef6\u548c\u7f51\u7edc\u4ee3\u7406\u7684\u4f7f\u7528\u60c5\u51b5\u3002\u4f7f\u7528\u56fd\u4ea7\u64cd\u4f5c\u7cfb\u7edf\u548c\u56fd\u4ea7\u6d4f\u89c8\u5668\u7ffb\u5899\u7b49\u4e8e\u5f53\u7740\u8b66\u5bdf\u7684\u9762\u7ffb\u5899\u3002</p>"},{"location":"security.zh_CN/#_3","title":"\u5206\u79bb\u56fd\u5185\u6d41\u91cf\u548c\u7ffb\u5899\u6d41\u91cf","text":"<p>\u7528\u6237\u4e0d\u5e94\u8be5\u4f7f\u7528\u7ffb\u5899\u4ee3\u7406\u8bbf\u95ee\u56fd\u5185\u7684\u7f51\u7ad9\u3002\u8fd9\u79cd\u505a\u6cd5\u4e00\u65b9\u9762\u4f1a\u964d\u4f4e\u6027\u80fd\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u6709\u52a9\u4e8e GFW \u53d1\u73b0\u548c\u5c01\u9501\u4ee3\u7406\u670d\u52a1\u5668\u3002\u4f8b\u5982\uff0cbilibili \u6216\u8005 GFW \u53d1\u73b0\u6709\u5f88\u591a\u89c6\u9891\u64ad\u653e\u8bf7\u6c42\u6765\u6e90\u4e8e\u67d0\u4e2a\u4e91\u670d\u52a1\u63d0\u4f9b\u5546\u7684 IP\uff0c\u90a3\u4e48\u8be5 IP \u53ef\u80fd\u4f1a\u88ab\u5224\u5b9a\u4e3a\u7528\u4e8e\u7ffb\u5899\u800c\u906d\u5230\u5c01\u7981\u3002</p> <p>mieru \u672c\u8eab\u6ca1\u6709\u63d0\u4f9b\u57fa\u4e8e\u57df\u540d\u89c4\u5219\u6216 IP \u5730\u5740\u4f4d\u7f6e\u6765\u5224\u65ad\u662f\u5426\u5e94\u8be5\u7ffb\u5899\u7684\u529f\u80fd\u3002\u7528\u6237\u5e94\u5f53\u4f7f\u7528\u53ef\u4ee5\u8fdb\u884c\u76f8\u5173\u914d\u7f6e\u7684\u6d4f\u89c8\u5668\u63d2\u4ef6\uff0c\u4f8b\u5982 Proxy SwitchyOmega\uff0c\u6216\u8005\u4f7f\u7528\u4e24\u4e2a\u4e0d\u540c\u7684\u6d4f\u89c8\u5668\uff0c\u4e00\u4e2a\u4e13\u95e8\u7528\u4e8e\u8bbf\u95ee\u56fd\u5185\u7f51\u7ad9\uff0c\u800c\u53e6\u4e00\u4e2a\u4e13\u95e8\u7528\u4e8e\u7ffb\u5899\u3002</p>"},{"location":"security.zh_CN/#_4","title":"\u4f7f\u7528\u865a\u62df\u673a\u6216\u5355\u72ec\u7684\u7535\u8111\u7ffb\u5899","text":"<p>\u53e6\u4e00\u7c7b\u9488\u5bf9\u7ffb\u5899\u8f6f\u4ef6\u7684\u653b\u51fb\u53d1\u751f\u5728\u7528\u6237\u7684\u7535\u8111\u4e0a\u3002\u4e00\u4e9b\u88c5\u673a\u91cf\u6781\u5927\u7684\u8f6f\u4ef6\uff0c\u4f8b\u5982 QQ\uff0c\u4f1a\u626b\u63cf\u7535\u8111\u4e0a\u7684\u8fdb\u7a0b\u548c\u6587\u4ef6\u3002\u5982\u679c\u53d1\u73b0\u7528\u6237\u5728\u8fd0\u884c shadowsocks \u7b49\u77e5\u540d\u7ffb\u5899\u8f6f\u4ef6\uff0c\u4ed6\u4eec\u4f1a\u8bb0\u5f55\u548c\u4e0a\u62a5\u8fd9\u4e9b\u884c\u4e3a\u3002</p> <p>\u8003\u8651\u5230\u56fd\u5185\u7528\u6237\u5f88\u96be\u5b8c\u5168\u4e0d\u4f7f\u7528\u56fd\u4ea7\u8f6f\u4ef6\uff0c\u6211\u4eec\u5efa\u8bae\u521b\u5efa\u4e00\u4e2a\u865a\u62df\u673a\uff0c\u6216\u8005\u4f7f\u7528\u5355\u72ec\u7684\u7535\u8111\u8fdb\u884c\u7ffb\u5899\u3002</p>"},{"location":"security.zh_CN/#tor","title":"\u4f7f\u7528 Tor \u6d0b\u8471\u8def\u7531 / \u6d0b\u8471\u6d4f\u89c8\u5668","text":"<p>\u7ffb\u5899\u8f6f\u4ef6\u5f00\u53d1\u8005\u3001\u8c03\u67e5\u8bb0\u8005\u3001\u7ef4\u6743\u5f8b\u5e08\u3001\u5728\u56fd\u5916\u7f51\u7ad9\u4e0a\u53c2\u4e0e\u653f\u6cbb\u8ba8\u8bba\u7684\u4eba\uff0c\u90fd\u662f\u9ad8\u98ce\u9669\u7528\u6237\u3002\u9664\u4e86\u4e0a\u8ff0\u4e09\u70b9\u4e4b\u5916\uff0c\u7ffb\u5899\u65f6\u8bf7\u52a1\u5fc5\u4f7f\u7528 Tor \u8fdb\u884c\u654f\u611f\u64cd\u4f5c\u3002\u5728\u56fd\u5185\u65e0\u6cd5\u76f4\u63a5\u8fde\u63a5 Tor \u7f51\u6865\uff0c\u4f46\u662f mieru \u53ef\u4ee5\u4f5c\u4e3a Tor \u7684\u524d\u7f6e\u4ee3\u7406\u3002\u5728 Tor \u6d4f\u89c8\u5668\u4e2d\u4f7f\u7528\u524d\u7f6e\u4ee3\u7406\u7684\u65b9\u6cd5\u5982\u4e0b\u56fe\u6240\u793a\uff08\u8bf7\u4f7f\u7528\u81ea\u5df1\u7535\u8111\u4e0a mieru \u76d1\u542c\u7684\u7aef\u53e3\u53f7\uff09\u3002</p> <p></p> <p></p> <p>\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u7ffb\u5899\u7684\u7f51\u901f\u6bd4\u8f83\u6162\uff0c\u53ef\u80fd\u65e0\u6cd5\u6d41\u7545\u89c2\u770b\u89c6\u9891\u3002</p> <p>\u5efa\u8bae\u9ad8\u98ce\u9669\u7528\u6237\u9605\u8bfb\u7f16\u7a0b\u968f\u60f3\u7684\u535a\u5ba2\u4e2d\u5173\u4e8e\u4fe1\u606f\u5b89\u5168\u7684\u6587\u7ae0\uff0c\u4fdd\u62a4\u597d\u9690\u79c1\u548c\u8e2a\u8ff9\uff0c\u907f\u514d\u88ab\u8de8\u7701\u8ffd\u6355\u3002</p>"},{"location":"server-install/","title":"Server Installation &amp; Configuration","text":"<p>The proxy server software mita needs to run on Linux. We provide both debian and RPM installers for installing mita on Debian / Ubuntu and Fedora / CentOS / Red Hat Enterprise Linux series distributions.</p>"},{"location":"server-install/#use-installation-script","title":"Use installation script","text":"<p>Follow the installation script and complete the server installation and configuration.</p> <pre><code>curl -fSsLO https://raw.githubusercontent.com/enfein/mieru/refs/heads/main/tools/setup.py\nchmod +x setup.py\nsudo python3 setup.py\n</code></pre> <p>Or you can manually install and configure proxy server using the steps below.</p>"},{"location":"server-install/#download-mita-installation-package","title":"Download mita installation package","text":"<pre><code># Debian / Ubuntu - X86_64\ncurl -LSO https://github.com/enfein/mieru/releases/download/v3.16.2/mita_3.16.2_amd64.deb\n\n# Debian / Ubuntu - ARM 64\ncurl -LSO https://github.com/enfein/mieru/releases/download/v3.16.2/mita_3.16.2_arm64.deb\n\n# RedHat / CentOS / Rocky Linux - X86_64\ncurl -LSO https://github.com/enfein/mieru/releases/download/v3.16.2/mita-3.16.2-1.x86_64.rpm\n\n# RedHat / CentOS / Rocky Linux - ARM 64\ncurl -LSO https://github.com/enfein/mieru/releases/download/v3.16.2/mita-3.16.2-1.aarch64.rpm\n</code></pre>"},{"location":"server-install/#install-mita-package","title":"Install mita package","text":"<pre><code># Debian / Ubuntu - X86_64\nsudo dpkg -i mita_3.16.2_amd64.deb\n\n# Debian / Ubuntu - ARM 64\nsudo dpkg -i mita_3.16.2_arm64.deb\n\n# RedHat / CentOS / Rocky Linux - X86_64\nsudo rpm -Uvh --force mita-3.16.2-1.x86_64.rpm\n\n# RedHat / CentOS / Rocky Linux - ARM 64\nsudo rpm -Uvh --force mita-3.16.2-1.aarch64.rpm\n</code></pre> <p>Those instructions can also be used to upgrade the version of mita software package.</p>"},{"location":"server-install/#grant-permissions-logout-and-login-again-to-make-the-change-effective","title":"Grant permissions, logout and login again to make the change effective","text":"<pre><code>sudo usermod -a -G mita $USER\n\n# logout\nexit\n</code></pre>"},{"location":"server-install/#reconnect-the-server-via-ssh-check-mita-daemon-status","title":"Reconnect the server via SSH, check mita daemon status","text":"<pre><code>systemctl status mita\n</code></pre> <p>If the output contains <code>active (running)</code>, it means that the mita daemon is already running. Normally, mita will start automatically after the server is booted.</p>"},{"location":"server-install/#check-mita-working-status","title":"Check mita working status","text":"<pre><code>mita status\n</code></pre> <p>If the installation is just completed, the output will be <code>mita server status is \"IDLE\"</code>, indicating that mita has not yet listening to requests from the mieru client.</p>"},{"location":"server-install/#modify-proxy-server-settings","title":"Modify proxy server settings","text":"<p>The mieru proxy supports two different transport protocols, TCP and UDP. To understand the differences between the protocols, please read mieru proxy protocols.</p> <p>Users should call</p> <pre><code>mita apply config &lt;FILE&gt;\n</code></pre> <p>to modify the proxy server settings. <code>&lt;FILE&gt;</code> is a JSON formatted configuration file. This configuration file does not need to specify the full proxy server settings. When you run command <code>mita apply config &lt;FILE&gt;</code>, the contents of the file will be merged into any existing proxy server settings.</p> <p>Below is an example of the server configuration file.</p> <pre><code>{\n    \"portBindings\": [\n        {\n            \"portRange\": \"2012-2022\",\n            \"protocol\": \"TCP\"\n        },\n        {\n            \"port\": 2027,\n            \"protocol\": \"TCP\"\n        }\n    ],\n    \"users\": [\n        {\n            \"name\": \"ducaiguozei\",\n            \"password\": \"xijinping\"\n        },\n        {\n            \"name\": \"meiyougongchandang\",\n            \"password\": \"caiyouxinzhongguo\"\n        }\n    ],\n    \"loggingLevel\": \"INFO\",\n    \"mtu\": 1400\n}\n</code></pre> <ol> <li>The <code>portBindings</code> -&gt; <code>port</code> property is the TCP or UDP port number that mita listens on, specify a value from 1025 to 65535. If you want to listen to a range of consecutive port numbers, you can also use the <code>portRange</code> property instead. Please make sure that the firewall allows communication using these ports.</li> <li>The <code>portBindings</code> -&gt; <code>protocol</code> property can be set to <code>TCP</code> or <code>UDP</code>.</li> <li>Fill in the <code>users</code> -&gt; <code>name</code> property with the user name.</li> <li>Fill in the <code>users</code> -&gt; <code>password</code> property with the user's password.</li> <li>[Optional] The <code>mtu</code> property is the maximum transport layer payload size when using the UDP proxy protocol. The default value is 1400. The minimum value is 1280.</li> </ol> <p>In addition to this, mita can listen to several different ports. We recommend using multiple ports in both server and client configurations.</p> <p>You can also create multiple users if you want to share the proxy for others to use.</p> <p>Assuming that on the server, the configuration file name is <code>server_config.json</code>, call the command <code>mita apply config server_config.json</code> to write the configuration after the file is modified.</p> <p>If there is an error in the configuration, mita will print the problem that occurred. Follow the prompts to modify the configuration file and re-run the <code>mita apply config &lt;FILE&gt;</code> command to write the configuration.</p> <p>After that, invoke command</p> <pre><code>mita describe config\n</code></pre> <p>to check the current proxy settings.</p>"},{"location":"server-install/#start-proxy-service","title":"Start proxy service","text":"<p>Use command</p> <pre><code>mita start\n</code></pre> <p>to start proxy service. At this point, mita will start listening to the port number specified in the settings.</p> <p>Then, use command</p> <pre><code>mita status\n</code></pre> <p>to check working status. If <code>mita server status is \"RUNNING\"</code> is returned here, it means that the proxy service is running and can process client requests.</p> <p>If you want to stop the proxy service, use command</p> <pre><code>mita stop\n</code></pre> <p>Note that each time you change the settings with <code>mita apply config &lt;FILE&gt;</code>, you need to restart the service with <code>mita stop</code> and <code>mita start</code> for the new settings to take effect. An exception is, if you only change <code>users</code> or <code>loggingLevel</code> settings, you may run <code>mita reload</code> to load the new settings, which will not disturb active connections between server and client.</p> <p>After starting the proxy service, proceed to Client Installation &amp; Configuration.</p>"},{"location":"server-install/#advanced-settings","title":"Advanced Settings","text":""},{"location":"server-install/#bbr-congestion-control-algorithm","title":"BBR Congestion Control Algorithm","text":"<p>BBR is a congestion control algorithm that does not rely on packet loss. Under poor network conditions, network transmission using BBR is faster than traditional algorithms.</p> <p>mieru's UDP transmission protocol already uses the BBR algorithm.</p> <p>Run the following script to use BBR algorithm on TCP transmission protocol on Linux.</p> <pre><code>curl -fSsLO https://raw.githubusercontent.com/enfein/mieru/refs/heads/main/tools/enable_tcp_bbr.py\nchmod +x enable_tcp_bbr.py\nsudo python3 enable_tcp_bbr.py\n</code></pre> <p>That script can be used on both server side and client side.</p>"},{"location":"server-install/#configuring-outbound-proxy","title":"Configuring Outbound Proxy","text":"<p>The outbound proxy feature allows mieru to work with other proxy tools to form a proxy chain. An example of the network topology of a proxy chain is shown in the diagram below:</p> <pre><code>mieru client -&gt; GFW -&gt; mita server -&gt; cloudflare proxy client -&gt; cloudflare CDN -&gt; target website\n</code></pre> <p>Through proxy chain, the target website sees the IP address of the cloudflare CDN, not the address of the mita server.</p> <p>Below is an example to configure a proxy chain.</p> <pre><code>{\n    \"egress\": {\n        \"proxies\": [\n            {\n                \"name\": \"cloudflare\",\n                \"protocol\": \"SOCKS5_PROXY_PROTOCOL\",\n                \"host\": \"127.0.0.1\",\n                \"port\": 4000,\n                \"socks5Authentication\": {\n                    \"user\": \"shilishanlu\",\n                    \"password\": \"buhuanjian\"\n                }\n            }\n        ],\n        \"rules\": [\n            {\n                \"ipRanges\": [\"*\"],\n                \"domainNames\": [\"*\"],\n                \"action\": \"PROXY\",\n                \"proxyName\": \"cloudflare\"\n            }\n        ]\n    }\n}\n</code></pre> <ol> <li>In the <code>egress</code> -&gt; <code>proxies</code> property, list the information of outbound proxy servers. The current version only supports socks5 outbound, so the value of <code>protocol</code> must be set to <code>SOCKS5_PROXY_PROTOCOL</code>. If the outbound proxy server requires socks5 username and password authentication, please fill in the <code>socks5Authentication</code> property. Otherwise, please remove the <code>socks5Authentication</code> property.</li> <li>In the <code>egress</code> -&gt; <code>rules</code> property, list outbound rules. The current version allows users to add up to one rule, and the values of <code>ipRanges</code>, <code>domainNames</code>, and <code>action</code> must be the same as the example above. <code>proxyName</code> needs to point to a proxy that exists in <code>egress</code> -&gt; <code>proxies</code> property.</li> </ol> <p>If you want to turn off the outbound proxy feature, simply set the <code>egress</code> property to an empty value <code>{}</code>.</p> <p>Note that proxy chain is different from nested proxy. An example of the network topology of a nested proxy is shown in the diagram below:</p> <pre><code>Tor browser -&gt; mieru client -&gt; GFW -&gt; mita server -&gt; Tor network -&gt; target website\n</code></pre> <p>For information on how to configure nested proxy on a Tor browser, please refer to the Security Guide.</p>"},{"location":"server-install/#dns-policy-in-ipv4-ipv6-dual-stack-network","title":"DNS Policy in IPv4 / IPv6 Dual-Stack Network","text":"<p>When a proxy client requests a target website using a domain name instead of an IP address, the proxy server needs to initiate a DNS request. If the proxy server is in an IPv4 / IPv6 dual-stack network, you can adjust the DNS policy using the following configuration:</p> <pre><code>{\n    \"dns\": {\n        \"dualStack\": \"USE_FIRST_IP\"\n    }\n}\n</code></pre> <p>The <code>dns</code> -&gt; <code>dualStack</code> attribute supports the following values:</p> <ol> <li><code>USE_FIRST_IP</code>: Always use the first IP address returned by the DNS server. This is the default policy.</li> <li><code>PREFER_IPv4</code>: Prefer to use the first IPv4 address returned by the DNS server. If there is no IPv4 address, use the first IPv6 address.</li> <li><code>PREFER_IPv6</code>: Prefer to use the first IPv6 address returned by the DNS server. If there is no IPv6 address, use the first IPv4 address.</li> <li><code>ONLY_IPv4</code>: Force to use the first IPv4 address returned by the DNS server. If there is no IPv4 address, the connection fails.</li> <li><code>ONLY_IPv6</code>: Force to use the first IPv6 address returned by the DNS server. If there is no IPv6 address, the connection fails.</li> </ol>"},{"location":"server-install/#allow-users-to-access-internal-network","title":"Allow Users to Access Internal Network","text":"<p>By default, proxy server only allows users to send proxy requests to the Internet.</p> <p>If you want to allow users to access private IP addresses (e.g., <code>192.168.1.100</code>) through the proxy server, set the <code>users</code> -&gt; <code>allowPrivateIP</code> attribute.</p> <p>If you want to allow users to access the server's local machine (e.g., <code>127.0.0.1</code>) through the proxy server, add the <code>users</code> -&gt; <code>allowLoopbackIP</code> attribute.</p> <pre><code>{\n    \"users\": [\n        {\n            \"name\": \"ducaiguozei\",\n            \"password\": \"xijinping\",\n            \"allowPrivateIP\": true,\n            \"allowLoopbackIP\": true\n        },\n        {\n            \"name\": \"meiyougongchandang\",\n            \"password\": \"caiyouxinzhongguo\"\n        }\n    ]\n}\n</code></pre>"},{"location":"server-install/#limiting-user-traffic","title":"Limiting User Traffic","text":"<p>We can use the <code>users</code> -&gt; <code>quotas</code> property to limit the amount of traffic a user is allowed to use. For example, if you want user \"ducaiguozei\" to use no more than 1 GB of traffic within 1 day, and no more than 10 GB within 30 days, you can apply the following settings.</p> <pre><code>{\n    \"users\": [\n        {\n            \"name\": \"ducaiguozei\",\n            \"password\": \"xijinping\",\n            \"quotas\": [\n                {\n                    \"days\": 1,\n                    \"megabytes\": 1024\n                },\n                {\n                    \"days\": 30,\n                    \"megabytes\": 10240\n                }\n            ]\n        },\n        {\n            \"name\": \"meiyougongchandang\",\n            \"password\": \"caiyouxinzhongguo\"\n        }\n    ]\n}\n</code></pre>"},{"location":"server-install/#optional-install-ntp-network-time-synchronization-service","title":"[Optional] Install NTP network time synchronization service","text":"<p>The client and proxy server software calculate the key based on the user name, password and system time. The server can decrypt and respond to the client's request only if the client and server have the same key. This requires that the system time of the client and the server must be in sync.</p> <p>To ensure that the server system time is accurate, we recommend that users enable or install the NTP network time service.</p> <p>In Linux, if system time synchronization is controlled by <code>systemd-timesyncd</code> service, you can modify configuration file <code>/etc/systemd/timesyncd.conf</code> to the following.</p> <pre><code>[Time]\nNTP=time.google.com\n</code></pre> <p>Otherwise, install NTP with the following command.</p> <pre><code># Debian / Ubuntu\nsudo apt-get install ntp\n\n# RedHat / CentOS / Rocky Linux\nsudo dnf install ntp\n</code></pre>"},{"location":"server-install.zh_CN/","title":"\u670d\u52a1\u5668\u5b89\u88c5\u4e0e\u914d\u7f6e","text":"<p>\u4ee3\u7406\u670d\u52a1\u5668\u8f6f\u4ef6 mita \u9700\u8981\u8fd0\u884c\u5728 Linux \u7cfb\u7edf\u4e2d\u3002\u6211\u4eec\u63d0\u4f9b\u4e86 debian \u548c RPM \u5b89\u88c5\u5305\uff0c\u4fbf\u4e8e\u7528\u6237\u5728 Debian / Ubuntu \u548c Fedora / CentOS / Red Hat Enterprise Linux \u7cfb\u5217\u53d1\u884c\u7248\u4e2d\u5b89\u88c5 mita\u3002</p>"},{"location":"server-install.zh_CN/#_2","title":"\u4f7f\u7528\u5b89\u88c5\u811a\u672c","text":"<p>\u9075\u5faa\u5b89\u88c5\u811a\u672c\u5e76\u5b8c\u6210\u670d\u52a1\u5668\u7684\u5b89\u88c5\u548c\u914d\u7f6e\u3002</p> <pre><code>curl -fSsLO https://raw.githubusercontent.com/enfein/mieru/refs/heads/main/tools/setup.py\nchmod +x setup.py\nsudo python3 setup.py --lang=zh\n</code></pre> <p>\u6216\u8005\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u624b\u52a8\u5b89\u88c5\u5e76\u914d\u7f6e\u4ee3\u7406\u670d\u52a1\u5668\u3002</p>"},{"location":"server-install.zh_CN/#mita","title":"\u4e0b\u8f7d mita \u5b89\u88c5\u5305","text":"<pre><code># Debian / Ubuntu - X86_64\ncurl -LSO https://github.com/enfein/mieru/releases/download/v3.16.2/mita_3.16.2_amd64.deb\n\n# Debian / Ubuntu - ARM 64\ncurl -LSO https://github.com/enfein/mieru/releases/download/v3.16.2/mita_3.16.2_arm64.deb\n\n# RedHat / CentOS / Rocky Linux - X86_64\ncurl -LSO https://github.com/enfein/mieru/releases/download/v3.16.2/mita-3.16.2-1.x86_64.rpm\n\n# RedHat / CentOS / Rocky Linux - ARM 64\ncurl -LSO https://github.com/enfein/mieru/releases/download/v3.16.2/mita-3.16.2-1.aarch64.rpm\n</code></pre>"},{"location":"server-install.zh_CN/#mita_1","title":"\u5b89\u88c5 mita \u8f6f\u4ef6\u5305","text":"<pre><code># Debian / Ubuntu - X86_64\nsudo dpkg -i mita_3.16.2_amd64.deb\n\n# Debian / Ubuntu - ARM 64\nsudo dpkg -i mita_3.16.2_arm64.deb\n\n# RedHat / CentOS / Rocky Linux - X86_64\nsudo rpm -Uvh --force mita-3.16.2-1.x86_64.rpm\n\n# RedHat / CentOS / Rocky Linux - ARM 64\nsudo rpm -Uvh --force mita-3.16.2-1.aarch64.rpm\n</code></pre> <p>\u4e0a\u8ff0\u6307\u4ee4\u4e5f\u53ef\u4ee5\u7528\u6765\u5347\u7ea7 mita \u8f6f\u4ef6\u5305\u7684\u7248\u672c\u3002</p>"},{"location":"server-install.zh_CN/#mita_2","title":"\u8d4b\u4e88\u5f53\u524d\u7528\u6237\u64cd\u4f5c mita \u7684\u6743\u9650\uff0c\u91cd\u65b0\u767b\u5f55\u4f7f\u6b64\u8bbe\u7f6e\u751f\u6548","text":"<pre><code>sudo usermod -a -G mita $USER\n\n# logout\nexit\n</code></pre>"},{"location":"server-install.zh_CN/#ssh-mita","title":"\u4f7f\u7528 SSH \u91cd\u65b0\u8fde\u63a5\u5230\u670d\u52a1\u5668\uff0c\u68c0\u67e5 mita \u5b88\u62a4\u8fdb\u7a0b\u7684\u72b6\u6001","text":"<pre><code>systemctl status mita\n</code></pre> <p>\u5982\u679c\u8f93\u51fa\u4e2d\u5305\u542b <code>active (running)</code> \uff0c\u8868\u793a mita \u5b88\u62a4\u8fdb\u7a0b\u5df2\u7ecf\u5f00\u59cb\u8fd0\u884c\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0cmita \u4f1a\u5728\u670d\u52a1\u5668\u542f\u52a8\u540e\u81ea\u52a8\u5f00\u59cb\u8fd0\u884c\u3002</p>"},{"location":"server-install.zh_CN/#mita_3","title":"\u67e5\u8be2 mita \u7684\u5de5\u4f5c\u72b6\u6001","text":"<pre><code>mita status\n</code></pre> <p>\u5982\u679c\u521a\u521a\u5b8c\u6210\u5b89\u88c5\uff0c\u6b64\u65f6\u7684\u8f93\u51fa\u4e3a <code>mita server status is \"IDLE\"</code>\uff0c\u8868\u793a mita \u8fd8\u6ca1\u6709\u5f00\u59cb\u76d1\u542c\u6765\u81ea mieru \u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u3002</p>"},{"location":"server-install.zh_CN/#_3","title":"\u4fee\u6539\u4ee3\u7406\u670d\u52a1\u5668\u8bbe\u7f6e","text":"<p>mieru \u4ee3\u7406\u652f\u6301 TCP \u548c UDP \u4e24\u79cd\u4e0d\u540c\u7684\u4f20\u8f93\u534f\u8bae\u3002\u8981\u4e86\u89e3\u534f\u8bae\u4e4b\u95f4\u7684\u5dee\u522b\uff0c\u8bf7\u9605\u8bfb mieru \u4ee3\u7406\u534f\u8bae\u3002</p> <p>\u7528\u6237\u53ef\u4ee5\u901a\u8fc7</p> <pre><code>mita apply config &lt;FILE&gt;\n</code></pre> <p>\u6307\u4ee4\u6765\u4fee\u6539\u4ee3\u7406\u670d\u52a1\u5668\u7684\u8bbe\u7f6e\uff0c\u8fd9\u91cc\u7684 <code>&lt;FILE&gt;</code> \u662f\u4e00\u4e2a JSON \u683c\u5f0f\u7684\u914d\u7f6e\u6587\u4ef6\u3002\u8be5\u914d\u7f6e\u6587\u4ef6\u4e0d\u9700\u8981\u6307\u5b9a\u5b8c\u6574\u7684\u4ee3\u7406\u670d\u52a1\u5668\u8bbe\u7f6e\u3002\u8fd0\u884c\u6307\u4ee4 <code>mita apply config &lt;FILE&gt;</code> \u65f6\uff0c\u6587\u4ef6\u5185\u5bb9\u4f1a\u5408\u5e76\u5230\u4efb\u4f55\u5df2\u6709\u7684\u4ee3\u7406\u670d\u52a1\u5668\u8bbe\u7f6e\u3002</p> <p>\u4e0b\u9762\u662f\u670d\u52a1\u5668\u914d\u7f6e\u6587\u4ef6\u7684\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>{\n    \"portBindings\": [\n        {\n            \"portRange\": \"2012-2022\",\n            \"protocol\": \"TCP\"\n        },\n        {\n            \"port\": 2027,\n            \"protocol\": \"TCP\"\n        }\n    ],\n    \"users\": [\n        {\n            \"name\": \"ducaiguozei\",\n            \"password\": \"xijinping\"\n        },\n        {\n            \"name\": \"meiyougongchandang\",\n            \"password\": \"caiyouxinzhongguo\"\n        }\n    ],\n    \"loggingLevel\": \"INFO\",\n    \"mtu\": 1400\n}\n</code></pre> <ol> <li><code>portBindings</code> -&gt; <code>port</code> \u5c5e\u6027\u662f mita \u76d1\u542c\u7684 TCP \u6216 UDP \u7aef\u53e3\u53f7\uff0c\u8bf7\u6307\u5b9a\u4e00\u4e2a\u4ece 1025 \u5230 65535 \u4e4b\u95f4\u7684\u503c\u3002\u5982\u679c\u60f3\u8981\u76d1\u542c\u8fde\u7eed\u7684\u7aef\u53e3\u53f7\uff0c\u4e5f\u53ef\u4ee5\u6539\u4e3a\u4f7f\u7528 <code>portRange</code> \u5c5e\u6027\u3002\u8bf7\u786e\u4fdd\u9632\u706b\u5899\u5141\u8bb8\u4f7f\u7528\u8fd9\u4e9b\u7aef\u53e3\u8fdb\u884c\u901a\u4fe1\u3002</li> <li><code>portBindings</code> -&gt; <code>protocol</code> \u5c5e\u6027\u53ef\u4ee5\u4f7f\u7528 <code>TCP</code> \u6216\u8005 <code>UDP</code>\u3002</li> <li>\u5728 <code>users</code> -&gt; <code>name</code> \u5c5e\u6027\u4e2d\u586b\u5199\u7528\u6237\u540d\u3002</li> <li>\u5728 <code>users</code> -&gt; <code>password</code> \u5c5e\u6027\u4e2d\u586b\u5199\u8be5\u7528\u6237\u7684\u5bc6\u7801\u3002</li> <li>\u3010\u53ef\u9009\u3011<code>mtu</code> \u5c5e\u6027\u662f\u4f7f\u7528 UDP \u4ee3\u7406\u534f\u8bae\u65f6\uff0c\u4f20\u8f93\u5c42\u6700\u5927\u7684\u8f7d\u8377\u5927\u5c0f\u3002\u9ed8\u8ba4\u503c\u662f 1400\uff0c\u6700\u5c0f\u503c\u662f 1280\u3002</li> </ol> <p>\u9664\u6b64\u4e4b\u5916\uff0cmita \u53ef\u4ee5\u76d1\u542c\u591a\u4e2a\u4e0d\u540c\u7684\u7aef\u53e3\u3002\u6211\u4eec\u5efa\u8bae\u5728\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u914d\u7f6e\u4e2d\u4f7f\u7528\u591a\u4e2a\u7aef\u53e3\u3002</p> <p>\u5982\u679c\u4f60\u60f3\u628a\u4ee3\u7406\u7ebf\u8def\u5206\u4eab\u7ed9\u522b\u4eba\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u4e0d\u540c\u7684\u7528\u6237\u3002</p> <p>\u5047\u8bbe\u5728\u670d\u52a1\u5668\u4e0a\uff0c\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u7684\u6587\u4ef6\u540d\u662f <code>server_config.json</code>\uff0c\u5728\u6587\u4ef6\u4fee\u6539\u5b8c\u6210\u4e4b\u540e\uff0c\u8bf7\u8c03\u7528\u6307\u4ee4 <code>mita apply config server_config.json</code> \u5199\u5165\u8be5\u914d\u7f6e\u3002</p> <p>\u5982\u679c\u914d\u7f6e\u6709\u8bef\uff0cmita \u4f1a\u6253\u5370\u51fa\u73b0\u7684\u95ee\u9898\u3002\u8bf7\u6839\u636e\u63d0\u793a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u91cd\u65b0\u8fd0\u884c <code>mita apply config &lt;FILE&gt;</code> \u6307\u4ee4\u5199\u5165\u4fee\u6b63\u540e\u7684\u914d\u7f6e\u3002</p> <p>\u5199\u5165\u540e\uff0c\u53ef\u4ee5\u7528</p> <pre><code>mita describe config\n</code></pre> <p>\u6307\u4ee4\u67e5\u770b\u5f53\u524d\u8bbe\u7f6e\u3002</p>"},{"location":"server-install.zh_CN/#_4","title":"\u542f\u52a8\u4ee3\u7406\u670d\u52a1","text":"<p>\u4f7f\u7528\u6307\u4ee4</p> <pre><code>mita start\n</code></pre> <p>\u542f\u52a8\u4ee3\u7406\u670d\u52a1\u3002\u6b64\u65f6 mita \u4f1a\u5f00\u59cb\u76d1\u542c\u8bbe\u7f6e\u4e2d\u6307\u5b9a\u7684\u7aef\u53e3\u53f7\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u8c03\u7528\u6307\u4ee4</p> <pre><code>mita status\n</code></pre> <p>\u67e5\u8be2\u5de5\u4f5c\u72b6\u6001\uff0c\u8fd9\u91cc\u5982\u679c\u8fd4\u56de <code>mita server status is \"RUNNING\"</code>\uff0c\u8bf4\u660e\u4ee3\u7406\u670d\u52a1\u6b63\u5728\u8fd0\u884c\uff0c\u53ef\u4ee5\u5f00\u59cb\u76f8\u5e94\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u4e86\u3002</p> <p>\u5982\u679c\u60f3\u8981\u505c\u6b62\u4ee3\u7406\u670d\u52a1\uff0c\u8bf7\u4f7f\u7528\u6307\u4ee4</p> <pre><code>mita stop\n</code></pre> <p>\u6ce8\u610f\uff0c\u6bcf\u6b21\u4f7f\u7528 <code>mita apply config &lt;FILE&gt;</code> \u4fee\u6539\u8bbe\u7f6e\u540e\uff0c\u9700\u8981\u7528 <code>mita stop</code> \u548c <code>mita start</code> \u91cd\u542f\u4ee3\u7406\u670d\u52a1\uff0c\u624d\u80fd\u4f7f\u65b0\u8bbe\u7f6e\u751f\u6548\u3002\u4e00\u4e2a\u4f8b\u5916\u662f\uff0c\u5982\u679c\u53ea\u4fee\u6539\u4e86 <code>users</code> \u6216\u8005 <code>loggingLevel</code> \u8bbe\u7f6e\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>mita reload</code> \u52a0\u8f7d\u65b0\u7684\u8bbe\u7f6e\uff0c\u6b64\u65f6\u4e0d\u4f1a\u5f71\u54cd\u670d\u52a1\u5668\u4e0e\u5ba2\u6237\u7aef\u7684\u6d3b\u8dc3\u8fde\u63a5\u3002</p> <p>\u542f\u52a8\u4ee3\u7406\u670d\u52a1\u540e\uff0c\u8bf7\u7ee7\u7eed\u8fdb\u884c\u5ba2\u6237\u7aef\u5b89\u88c5\u4e0e\u914d\u7f6e\u3002</p>"},{"location":"server-install.zh_CN/#_5","title":"\u9ad8\u7ea7\u8bbe\u7f6e","text":""},{"location":"server-install.zh_CN/#bbr","title":"BBR \u62e5\u585e\u63a7\u5236\u7b97\u6cd5","text":"<p>BBR \u662f\u4e00\u79cd\u4e0d\u4f9d\u8d56\u4e8e\u4e22\u5305\u7684\u62e5\u585e\u63a7\u5236\u7b97\u6cd5\u3002\u5728\u6076\u52a3\u7684\u7f51\u7edc\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528 BBR \u7684\u7f51\u7edc\u4f20\u8f93\u901f\u5ea6\u6bd4\u4f20\u7edf\u7b97\u6cd5\u66f4\u5feb\u3002</p> <p>mieru \u7684 UDP \u4f20\u8f93\u534f\u8bae\u5df2\u7ecf\u4f7f\u7528\u4e86 BBR \u7b97\u6cd5\u3002</p> <p>\u8fd0\u884c\u4ee5\u4e0b\u811a\u672c\u5728 Linux \u7cfb\u7edf\u4e2d\u8ba9 TCP \u4f20\u8f93\u534f\u8bae\u4f7f\u7528 BBR \u7b97\u6cd5\u3002</p> <pre><code>curl -fSsLO https://raw.githubusercontent.com/enfein/mieru/refs/heads/main/tools/enable_tcp_bbr.py\nchmod +x enable_tcp_bbr.py\nsudo python3 enable_tcp_bbr.py\n</code></pre> <p>\u4e0a\u8ff0\u811a\u672c\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u4e2d\u4f7f\u7528\u3002</p>"},{"location":"server-install.zh_CN/#_6","title":"\u914d\u7f6e\u51fa\u7ad9\u4ee3\u7406","text":"<p>\u51fa\u7ad9\u4ee3\u7406\u529f\u80fd\u5141\u8bb8 mieru \u4e0e\u5176\u4ed6\u4ee3\u7406\u5de5\u5177\u7ed3\u5408\u6784\u6210\u94fe\u5f0f\u4ee3\u7406\u3002\u94fe\u5f0f\u4ee3\u7406\u7684\u7f51\u7edc\u62d3\u6251\u7ed3\u6784\u7684\u4e00\u4e2a\u4f8b\u5b50\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <pre><code>mieru \u5ba2\u6237\u7aef -&gt; GFW -&gt; mita \u670d\u52a1\u5668 -&gt; cloudflare \u4ee3\u7406\u5ba2\u6237\u7aef -&gt; cloudflare CDN -&gt; \u76ee\u6807\u7f51\u7ad9\n</code></pre> <p>\u901a\u8fc7\u94fe\u5f0f\u4ee3\u7406\uff0c\u76ee\u6807\u7f51\u7ad9\u770b\u5230\u7684 IP \u5730\u5740\u662f cloudflare CDN \u7684\u5730\u5740\uff0c\u800c\u4e0d\u662f mita \u670d\u52a1\u5668\u7684\u5730\u5740\u3002</p> <p>\u4e0b\u9762\u662f\u914d\u7f6e\u94fe\u5f0f\u4ee3\u7406\u7684\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>{\n    \"egress\": {\n        \"proxies\": [\n            {\n                \"name\": \"cloudflare\",\n                \"protocol\": \"SOCKS5_PROXY_PROTOCOL\",\n                \"host\": \"127.0.0.1\",\n                \"port\": 4000,\n                \"socks5Authentication\": {\n                    \"user\": \"shilishanlu\",\n                    \"password\": \"buhuanjian\"\n                }\n            }\n        ],\n        \"rules\": [\n            {\n                \"ipRanges\": [\"*\"],\n                \"domainNames\": [\"*\"],\n                \"action\": \"PROXY\",\n                \"proxyName\": \"cloudflare\"\n            }\n        ]\n    }\n}\n</code></pre> <ol> <li>\u5728 <code>egress</code> -&gt; <code>proxies</code> \u5c5e\u6027\u4e2d\u5217\u4e3e\u51fa\u7ad9\u4ee3\u7406\u670d\u52a1\u5668\u7684\u4fe1\u606f\u3002\u5f53\u524d\u7248\u672c\u53ea\u652f\u6301 socks5 \u51fa\u7ad9\uff0c\u56e0\u6b64 <code>protocol</code> \u7684\u503c\u5fc5\u987b\u8bbe\u5b9a\u4e3a <code>SOCKS5_PROXY_PROTOCOL</code>\u3002\u5982\u679c\u51fa\u7ad9\u4ee3\u7406\u670d\u52a1\u5668\u9700\u8981 socks5 \u7528\u6237\u540d\u548c\u5bc6\u7801\u9a8c\u8bc1\uff0c\u8bf7\u586b\u5199 <code>socks5Authentication</code> \u5c5e\u6027\u3002\u5426\u5219\uff0c\u8bf7\u5220\u9664 <code>socks5Authentication</code> \u5c5e\u6027\u3002</li> <li>\u5728 <code>egress</code> -&gt; <code>rules</code> \u5c5e\u6027\u4e2d\u5217\u4e3e\u51fa\u7ad9\u89c4\u5219\u3002\u5f53\u524d\u7248\u672c\u6700\u591a\u5141\u8bb8\u7528\u6237\u6dfb\u52a0\u4e00\u6761\u89c4\u5219\uff0c\u4e14 <code>ipRanges</code>, <code>domainNames</code> \u548c <code>action</code> \u7684\u503c\u5fc5\u987b\u4e0e\u4e0a\u9762\u7684\u4f8b\u5b50\u76f8\u540c\u3002<code>proxyName</code> \u9700\u8981\u6307\u5411\u4e00\u4e2a <code>egress</code> -&gt; <code>proxies</code> \u5c5e\u6027\u4e2d\u5b58\u5728\u7684\u4ee3\u7406\u3002</li> </ol> <p>\u5982\u679c\u60f3\u8981\u5173\u95ed\u51fa\u7ad9\u4ee3\u7406\u529f\u80fd\uff0c\u5c06 <code>egress</code> \u5c5e\u6027\u8bbe\u7f6e\u4e3a\u7a7a <code>{}</code> \u5373\u53ef\u3002</p> <p>\u6ce8\u610f\uff0c\u94fe\u5f0f\u4ee3\u7406\u548c\u5d4c\u5957\u4ee3\u7406\u4e0d\u540c\u3002\u5d4c\u5957\u4ee3\u7406\u7684\u7f51\u7edc\u62d3\u6251\u7ed3\u6784\u7684\u4e00\u4e2a\u4f8b\u5b50\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <pre><code>Tor \u6d4f\u89c8\u5668 -&gt; mieru \u5ba2\u6237\u7aef -&gt; GFW -&gt; mita \u670d\u52a1\u5668 -&gt; Tor \u7f51\u7edc -&gt; \u76ee\u6807\u7f51\u7ad9\n</code></pre> <p>\u5173\u4e8e\u5982\u4f55\u5728 Tor \u6d4f\u89c8\u5668\u4e0a\u914d\u7f6e\u5d4c\u5957\u4ee3\u7406\uff0c\u8bf7\u53c2\u89c1\u7ffb\u5899\u5b89\u5168\u6307\u5357\u3002</p>"},{"location":"server-install.zh_CN/#ipv4-ipv6-dns","title":"IPv4 / IPv6 \u53cc\u6808\u7f51\u7edc\u4e2d\u7684 DNS \u7b56\u7565","text":"<p>\u5f53\u4ee3\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u76ee\u6807\u7f51\u7ad9\u662f\u57df\u540d\uff0c\u800c\u4e0d\u662f IP \u5730\u5740\u65f6\uff0c\u4ee3\u7406\u670d\u52a1\u5668\u9700\u8981\u53d1\u8d77 DNS \u8bf7\u6c42\u3002\u5982\u679c\u4ee3\u7406\u670d\u52a1\u5668\u5904\u4e8e IPv4 / IPv6 \u53cc\u6808\u7f51\u7edc\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u914d\u7f6e\u8c03\u6574 DNS \u7b56\u7565\uff1a</p> <pre><code>{\n    \"dns\": {\n        \"dualStack\": \"USE_FIRST_IP\"\n    }\n}\n</code></pre> <p><code>dns</code> -&gt; <code>dualStack</code> \u5c5e\u6027\u652f\u6301\u7684\u503c\u5305\u62ec\uff1a</p> <ol> <li><code>USE_FIRST_IP</code>\uff1a\u6c38\u8fdc\u4f7f\u7528 DNS \u670d\u52a1\u5668\u8fd4\u56de\u7684\u7b2c\u4e00\u4e2a IP \u5730\u5740\u3002\u8fd9\u662f\u9ed8\u8ba4\u7b56\u7565\u3002</li> <li><code>PREFER_IPv4</code>\uff1a\u4f18\u5148\u4f7f\u7528 DNS \u670d\u52a1\u5668\u8fd4\u56de\u7684\u7b2c\u4e00\u4e2a IPv4 \u5730\u5740\u3002\u5982\u679c\u6ca1\u6709 IPv4 \u5730\u5740\uff0c\u5219\u4f7f\u7528\u7b2c\u4e00\u4e2a IPv6 \u5730\u5740\u3002</li> <li><code>PREFER_IPv6</code>\uff1a\u4f18\u5148\u4f7f\u7528 DNS \u670d\u52a1\u5668\u8fd4\u56de\u7684\u7b2c\u4e00\u4e2a IPv6 \u5730\u5740\u3002\u5982\u679c\u6ca1\u6709 IPv6 \u5730\u5740\uff0c\u5219\u4f7f\u7528\u7b2c\u4e00\u4e2a IPv4 \u5730\u5740\u3002</li> <li><code>ONLY_IPv4</code>\uff1a\u5f3a\u5236\u4f7f\u7528 DNS \u670d\u52a1\u5668\u8fd4\u56de\u7684\u7b2c\u4e00\u4e2a IPv4 \u5730\u5740\u3002\u5982\u679c\u6ca1\u6709 IPv4 \u5730\u5740\u5219\u8fde\u63a5\u5931\u8d25\u3002</li> <li><code>ONLY_IPv6</code>\uff1a\u5f3a\u5236\u4f7f\u7528 DNS \u670d\u52a1\u5668\u8fd4\u56de\u7684\u7b2c\u4e00\u4e2a IPv6 \u5730\u5740\u3002\u5982\u679c\u6ca1\u6709 IPv6 \u5730\u5740\u5219\u8fde\u63a5\u5931\u8d25\u3002</li> </ol>"},{"location":"server-install.zh_CN/#_7","title":"\u5141\u8bb8\u7528\u6237\u8bbf\u95ee\u5185\u7f51","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ee3\u7406\u670d\u52a1\u5668\u53ea\u5141\u8bb8\u7528\u6237\u5411\u4e92\u8054\u7f51\u53d1\u8d77\u4ee3\u7406\u8bf7\u6c42\u3002</p> <p>\u5982\u679c\u9700\u8981\u5141\u8bb8\u7528\u6237\u901a\u8fc7\u4ee3\u7406\u670d\u52a1\u5668\u8bbf\u95ee\u79c1\u6709 IP \u5730\u5740\uff0c\u4f8b\u5982 <code>192.168.1.100</code>\uff0c\u8bf7\u8bbe\u7f6e <code>users</code> -&gt; <code>allowPrivateIP</code> \u5c5e\u6027\u3002</p> <p>\u5982\u679c\u9700\u8981\u5141\u8bb8\u7528\u6237\u901a\u8fc7\u4ee3\u7406\u670d\u52a1\u5668\u8bbf\u95ee\u670d\u52a1\u5668\u672c\u673a\uff0c\u4f8b\u5982 <code>127.0.0.1</code>\uff0c\u8bf7\u8bbe\u7f6e <code>users</code> -&gt; <code>allowLoopbackIP</code> \u5c5e\u6027\u3002</p> <pre><code>{\n    \"users\": [\n        {\n            \"name\": \"ducaiguozei\",\n            \"password\": \"xijinping\",\n            \"allowPrivateIP\": true,\n            \"allowLoopbackIP\": true\n        },\n        {\n            \"name\": \"meiyougongchandang\",\n            \"password\": \"caiyouxinzhongguo\"\n        }\n    ]\n}\n</code></pre>"},{"location":"server-install.zh_CN/#_8","title":"\u9650\u5236\u7528\u6237\u6d41\u91cf","text":"<p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>users</code> -&gt; <code>quotas</code> \u5c5e\u6027\u9650\u5236\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u7684\u6d41\u91cf\u5927\u5c0f\u3002\u4f8b\u5982\uff0c\u5982\u679c\u60f3\u8ba9\u7528\u6237 \"ducaiguozei\" \u5728 1 \u5929\u65f6\u95f4\u5185\u6700\u591a\u4f7f\u7528 1 GB \u6d41\u91cf\uff0c\u5e76\u4e14\u5728 30 \u5929\u65f6\u95f4\u5185\u6700\u591a\u4f7f\u7528 10 GB \u6d41\u91cf\uff0c\u53ef\u4ee5\u5e94\u7528\u4e0b\u9762\u7684\u8bbe\u7f6e\u3002</p> <pre><code>{\n    \"users\": [\n        {\n            \"name\": \"ducaiguozei\",\n            \"password\": \"xijinping\",\n            \"quotas\": [\n                {\n                    \"days\": 1,\n                    \"megabytes\": 1024\n                },\n                {\n                    \"days\": 30,\n                    \"megabytes\": 10240\n                }\n            ]\n        },\n        {\n            \"name\": \"meiyougongchandang\",\n            \"password\": \"caiyouxinzhongguo\"\n        }\n    ]\n}\n</code></pre>"},{"location":"server-install.zh_CN/#ntp","title":"\u3010\u53ef\u9009\u3011\u5b89\u88c5 NTP \u7f51\u7edc\u65f6\u95f4\u540c\u6b65\u670d\u52a1","text":"<p>\u5ba2\u6237\u7aef\u548c\u4ee3\u7406\u670d\u52a1\u5668\u8f6f\u4ef6\u4f1a\u6839\u636e\u7528\u6237\u540d\u3001\u5bc6\u7801\u548c\u7cfb\u7edf\u65f6\u95f4\uff0c\u5206\u522b\u8ba1\u7b97\u5bc6\u94a5\u3002\u53ea\u6709\u5f53\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7684\u5bc6\u94a5\u76f8\u540c\u65f6\uff0c\u670d\u52a1\u5668\u624d\u80fd\u89e3\u5bc6\u548c\u54cd\u5e94\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u3002\u8fd9\u8981\u6c42\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7684\u7cfb\u7edf\u65f6\u95f4\u4e0d\u80fd\u6709\u5f88\u5927\u7684\u5dee\u522b\u3002</p> <p>\u4e3a\u4e86\u4fdd\u8bc1\u670d\u52a1\u5668\u7cfb\u7edf\u65f6\u95f4\u662f\u7cbe\u786e\u7684\uff0c\u6211\u4eec\u5efa\u8bae\u7528\u6237\u542f\u52a8\u6216\u5b89\u88c5 NTP \u7f51\u7edc\u65f6\u95f4\u670d\u52a1\u3002</p> <p>\u5728 Linux \u4e2d\uff0c\u5982\u679c\u7cfb\u7edf\u65f6\u95f4\u540c\u6b65\u7531 <code>systemd-timesyncd</code> \u670d\u52a1\u7ba1\u7406\uff0c\u4f60\u53ef\u4ee5\u5c06 <code>/etc/systemd/timesyncd.conf</code> \u914d\u7f6e\u6587\u4ef6\u66f4\u6539\u4e3a\u5982\u4e0b\u5185\u5bb9\u3002</p> <pre><code>[Time]\nNTP=time.google.com\n</code></pre> <p>\u5426\u5219\uff0c\u4f7f\u7528\u4e0b\u9762\u7684\u6307\u4ee4\u5b89\u88c5 NTP\u3002</p> <pre><code># Debian / Ubuntu\nsudo apt-get install ntp\n\n# RedHat / CentOS / Rocky Linux\nsudo dnf install ntp\n</code></pre>"}]}